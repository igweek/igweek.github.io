## 排除扫描目标的命令
使用Nmap的有关参数可在扫描工作开始前指定一个、多个目标或随机产生的若干IP地址或主机名，同时使用**--exclude**可以排除一些你不想扫描的目标。
示例：nmap 192.168.1.0/24 --exclude 192.168.1.10 排除 192.168.1.10 主机。

## 高级用法
Nmap 提供了多种高级扫描技巧，用于绕过防火墙和入侵检测系统（IDS），使得扫描过程更加隐蔽。

### 1. **分片（Fragmentation）**
   - **概念**：防火墙和IDS通常检查数据包的完整性，分片技术通过将一个大的数据包拆分成多个小数据包发送，使得防火墙和IDS可能无法识别完整的数据包，从而绕过检测。
   - **原理**：Nmap会将TCP数据包分割成多个更小的包，发送时每个小包都带有自己的IP头，这样检测系统可能无法看到整个扫描数据包的内容，从而无法对其进行完整的检查。
   - **命令示例**：
     - 使用 `-f` 参数启用数据包分片：  
       ```
       nmap -f 192.168.1.1
       ```
       该命令将扫描目标主机 `192.168.1.1` 并启用分片。通过此技术，Nmap会将发送的数据包拆分成更小的包，以绕过防火墙或IDS的检测。

   - **应用场景**：适用于防火墙或IDS对大数据包进行检查时，可以通过分片规避检测，尤其是当目标网络中的防火墙或IDS不对小包进行深度检查时。

### 2. **诱饵扫描（Decoy Scan）**
   - **概念**：诱饵扫描通过向目标发送来自多个IP地址的数据包，使得目标系统误认为是多个不同主机在进行扫描。通过混淆扫描源IP，减少被检测到的概率。
   - **原理**：Nmap允许用户在扫描时同时使用多个IP地址作为诱饵。目标主机会收到来自这些诱饵地址的数据包，混淆了真正的攻击者的IP，防止IDS或防火墙检测到扫描的来源。
   - **命令示例**：
     - 使用 `-D` 参数来指定诱饵主机：
       ```
       nmap -D 192.168.1.5,192.168.1.6,ME 192.168.1.1
       ```
       该命令表示Nmap在扫描目标 `192.168.1.1` 时，除了使用源IP外，还使用 `192.168.1.5` 和 `192.168.1.6` 作为诱饵（`ME` 表示使用自己的真实IP作为诱饵）。

   - **应用场景**：适用于防止目标系统通过IDS或防火墙发现扫描源IP。通过诱饵扫描，可以有效混淆扫描源，避免被定位为攻击者。

### 3. **源地址伪装（IP Spoofing）**
   - **概念**：源地址伪装通过将数据包的源IP地址伪装成其他主机的IP地址，使得目标主机认为是其他主机在进行连接，从而隐藏扫描者的真实身份。
   - **原理**：源地址伪装通过修改IP头部的源地址字段来伪装扫描源。通常情况下，目标主机会将响应发送到伪装的源地址，但是该伪装IP并不实际接收数据包，因此该技术通常与其他技巧（如回显扫描或代理服务器）结合使用。
   - **命令示例**：
     - 使用 `-S` 参数进行源地址伪装：
       ```
       nmap -S 192.168.1.100 192.168.1.1
       ```
       该命令使得Nmap将源IP伪装为 `192.168.1.100`，扫描目标 `192.168.1.1`。目标主机会认为 `192.168.1.100` 是扫描源，而不会检测到实际的扫描者IP。

   - **应用场景**：适用于隐藏扫描者的IP地址，避免暴露真实身份，尤其是在进行渗透测试或攻击性扫描时需要避免被目标追踪。

### 4. **结合使用**
   - **例子**：如果你想同时使用多个技巧，如分片、诱饵扫描和源地址伪装，你可以将它们结合使用以最大化隐蔽性。
     ```
     nmap -f -D 192.168.1.5,192.168.1.6,ME -S 192.168.1.100 192.168.1.1
     ```
     该命令会：
     - 使用分片技术将数据包拆分，
     - 使用 `192.168.1.5` 和 `192.168.1.6` 作为诱饵，混淆扫描源，
     - 将源IP伪装为 `192.168.1.100` 来隐藏真实的扫描者IP。
