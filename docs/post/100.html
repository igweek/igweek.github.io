<!DOCTYPE html>
<html data-color-mode="light" data-dark-theme="dark" data-light-theme="light" lang="zh-CN">
<head>
    <meta content="text/html; charset=utf-8" http-equiv="content-type" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link href='https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/Primer/21.0.7/primer.css' rel='stylesheet' />
    <script async src='https://www.googletagmanager.com/gtag/js?id=G-5KH0XJYCQ7'></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'G-5KH0XJYCQ7');</script><script defer src="https://umami.myla.eu.org/script.js" data-website-id="a7942b92-e528-4d9b-a65a-4c19d4a8b4f1"></script><script src='/plugins/GmeekVercount.js'></script>
    <link rel="icon" href="/img/123.png"><script>
        let theme = localStorage.getItem("meek_theme") || "light";
        document.documentElement.setAttribute("data-color-mode", theme);
    </script>
<meta name="description" content="
# Dockerå®éªŒæ‰‹å†Œ (CentOS 8)

## 1. å¼•è¨€

### 1.1 Dockerç®€ä»‹

åœ¨å½“ä»Šçš„è½¯ä»¶å¼€å‘å’Œéƒ¨ç½²é¢†åŸŸï¼Œ**å®¹å™¨åŒ–æŠ€æœ¯**å·²æˆä¸ºä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ã€‚">
<meta property="og:title" content="Dockerå­¦ä¹ æŒ‡å—">
<meta property="og:description" content="
# Dockerå®éªŒæ‰‹å†Œ (CentOS 8)

## 1. å¼•è¨€

### 1.1 Dockerç®€ä»‹

åœ¨å½“ä»Šçš„è½¯ä»¶å¼€å‘å’Œéƒ¨ç½²é¢†åŸŸï¼Œ**å®¹å™¨åŒ–æŠ€æœ¯**å·²æˆä¸ºä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ã€‚">
<meta property="og:type" content="article">
<meta property="og:url" content="https://bbs.017121.xyz/post/100.html">
<meta property="og:image" content="/img/123.png">
<title>Dockerå­¦ä¹ æŒ‡å—</title>
<link href="//unpkg.com/@wooorm/starry-night@2.1.1/style/both.css" rel="stylesheet" />


</head>
<style>
body{box-sizing: border-box;min-width: 200px;max-width: 900px;margin: 20px auto;padding: 45px;font-size: 16px;font-family: sans-serif;line-height: 1.25;}
#header{display:flex;padding-bottom:8px;border-bottom: 1px solid var(--borderColor-muted, var(--color-border-muted));margin-bottom: 16px;}
#footer {margin-top:64px; text-align: center;font-size: small;}

</style>

<style>
.postTitle{margin: auto 0;font-size:40px;font-weight:bold;}
.title-right{display:flex;margin:auto 0 0 auto;}
.title-right .circle{padding: 14px 16px;margin-right:8px;}
#postBody{border-bottom: 1px solid var(--color-border-default);padding-bottom:36px;}
#postBody hr{height:2px;}
#cmButton{height:48px;margin-top:48px;}
#comments{margin-top:64px;}
.g-emoji{font-size:24px;}
@media (max-width: 600px) {
    body {padding: 8px;}
    .postTitle{font-size:24px;}
}
.copy-feedback {
    display: none;
    position: absolute;
    top: 10px;
    right: 50px;
    color: var(--color-fg-on-emphasis);
    background-color: var(--color-fg-muted);
    border-radius: 3px;
    padding: 5px 8px;
    font-size: 12px;
}
</style>
<style>.box-sizing:border-box}body{min-width:200px;max-width:760px;margin:0 auto;padding:1em;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;color:#595959;font-size:16px;line-height:1.8em;background-color:#f9f9f9 !important;background-image:linear-gradient(#e5e7eb 1px, transparent 1px),linear-gradient(90deg, #e5e7eb 1px, transparent 1px) !important;background-size:20px 20px !important;background-attachment:fixed !important;word-break:break-all}blockquote{margin-left:0;background-color:#ebf4ff;border-color:#7f9cf5;padding-top:.5rem;padding-bottom:.5rem;color:#667eea}strong{color:#5a67d8}code,a{color:#5a67d8}a{border-color:#667eea}code{background-color:#ebf4ff}blockquote,details,dl,ol,p,pre,table,ul{margin-bottom:1rem}ol{list-style:decimal}ul{list-style:disc}ol,ul{padding-left:2em}h1,h2{border-color:#5a67d8;border-style:solid;border-top-width:0;border-right-width:0;font-weight:500;padding-top:.25rem;padding-bottom:.25rem;padding-left:.75rem}h1{border-bottom:1px solid #eaecef !important;border-left-width:0}h2{border-bottom:1px solid #eaecef !important;border-left-width:6px}h1,h2,h3,h4,h5,h6{margin-bottom:16px;line-height:1.25}blockquote{padding-top:.5rem;padding-bottom:.5rem;padding-left:1rem;padding-right:.5rem;border-left:.25em solid}blockquote>:last-child{margin-bottom:0}blockquote>:first-child{margin-top:0}strong{font-weight:700}strong::before{content:'ã€Œ'}strong::after{content:'ã€'}code,a{font-weight:500}code,a{font-size:unset}a{text-decoration:none;border-bottom:1px solid}.footnote-ref{border-width:0}code{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}pre>code{font-weight:400;color:unset;line-height:1.6}picture img{border-radius:6px;display:block;margin:10px 0;object-fit:contain;box-shadow:2px 4px 7px #999}img{max-width:100%;display:block;margin:10px 0;object-fit:contain;border-radius:6px;box-shadow:2px 4px 7px #999}picture{display:flex;flex-direction:column;align-items:flex-start;margin-top:6px;margin-bottom:6px}pre,pre code[class*="language-"]{display:block;overflow-x:auto;padding:0}pre code[class*="language-"]{padding:12px;padding-top:6px}.svg-markmap-box{min-height:20rem;width:100%}.footnotes{padding-top:.5rem;padding-bottom:.5rem}code[class*="language-"],pre[class*="language-"]{color:#f8f8f2;background:none;text-shadow:0 1px rgba(0,0,0,.3);font-family:Consolas,Monaco,'Andale Mono','Ubuntu Mono',monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*="language-"]{padding:1em;margin:.5em 0;overflow:auto;border-radius:6px}:not(pre)>code[class*="language-"],pre[class*="language-"]{background:#272822}:not(pre)>code[class*="language-" ]{padding:.1em;border-radius:.3em;white-space:normal}.token.comment,.token.prolog,.token.doctype,.token.cdata{color:#8292a2}.token.punctuation{color:#f8f8f2}.token.namespace{opacity:.7}.token.property,.token.tag,.token.constant,.token.symbol,.token.deleted{color:#f92672}.token.boolean,.token.number{color:#ae81ff}.token.selector,.token.attr-name,.token.string,.token.char,.token.builtin,.token.inserted{color:#a6e22e}.token.operator,.token.entity,.token.url,.language-css .token.string,.style .token.string,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.function,.token.class-name{color:#e6db74}.token.keyword{color:#66d9ef}.token.regex,.token.important{color:#fd971f}.token.important,.token.bold{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}h3{padding-left:.75rem;border-left:4px solid #5a67d8}</style>



<body>
    <div id="header">
<h1 class="postTitle">Dockerå­¦ä¹ æŒ‡å—</h1>
<div class="title-right">
    <a href="https://bbs.017121.xyz" id="buttonHome" class="btn btn-invisible circle" title="é¦–é¡µ">
        <svg class="octicon" width="16" height="16">
            <path id="pathHome" fill-rule="evenodd"></path>
        </svg>
    </a>
    
    <a href="https://github.com/igweek/igweek.github.io/issues/100" target="_blank" class="btn btn-invisible circle" title="Issue">
        <svg class="octicon" width="16" height="16">
            <path id="pathIssue" fill-rule="evenodd"></path>
        </svg>
    </a>
    

    <a class="btn btn-invisible circle" onclick="modeSwitch();" title="åˆ‡æ¢ä¸»é¢˜">
        <svg class="octicon" width="16" height="16" >
            <path id="themeSwitch" fill-rule="evenodd"></path>
        </svg>
    </a>

</div>
</div>
    <div id="content">
<div class="markdown-body" id="postBody"><h1>Dockerå®éªŒæ‰‹å†Œ (CentOS 8)</h1>
<h2>1. å¼•è¨€</h2>
<h3>1.1 Dockerç®€ä»‹</h3>
<p>åœ¨å½“ä»Šçš„è½¯ä»¶å¼€å‘å’Œéƒ¨ç½²é¢†åŸŸï¼Œ<strong>å®¹å™¨åŒ–æŠ€æœ¯</strong>å·²æˆä¸ºä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ã€‚Dockerä½œä¸ºå®¹å™¨æŠ€æœ¯çš„é¢†å¯¼è€…ï¼Œé€šè¿‡æä¾›ä¸€ç§è½»é‡çº§ã€å¯ç§»æ¤ã€è‡ªç»™è‡ªè¶³çš„æ‰“åŒ…æœºåˆ¶ï¼Œå½»åº•æ”¹å˜äº†åº”ç”¨ç¨‹åºçš„æ„å»ºã€åˆ†å‘å’Œè¿è¡Œæ–¹å¼ã€‚å®ƒå…è®¸å¼€å‘è€…å°†åº”ç”¨ç¨‹åºåŠå…¶æ‰€æœ‰ä¾èµ–é¡¹ï¼ˆä»£ç ã€è¿è¡Œæ—¶ã€ç³»ç»Ÿå·¥å…·ã€ç³»ç»Ÿåº“ç­‰ï¼‰æ‰“åŒ…åˆ°ä¸€ä¸ªç‹¬ç«‹çš„<strong>é•œåƒ</strong>ä¸­ï¼Œç„¶åä»è¿™ä¸ªé•œåƒåˆ›å»º<strong>å®¹å™¨</strong>ï¼Œç¡®ä¿åº”ç”¨ç¨‹åºåœ¨ä»»ä½•ç¯å¢ƒä¸­éƒ½èƒ½ä»¥ç›¸åŒçš„æ–¹å¼è¿è¡Œï¼Œä»è€Œè§£å†³äº†â€œåœ¨æˆ‘æœºå™¨ä¸Šå¯ä»¥è¿è¡Œâ€çš„é—®é¢˜ã€‚</p>
<p>Dockerçš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºå…¶<strong>ç¯å¢ƒä¸€è‡´æ€§</strong>ã€<strong>å¿«é€Ÿéƒ¨ç½²</strong>ã€<strong>èµ„æºéš”ç¦»</strong>å’Œ<strong>é«˜æ•ˆåˆ©ç”¨</strong>ã€‚å®ƒæå¤§åœ°ç®€åŒ–äº†å¼€å‘ã€æµ‹è¯•å’Œç”Ÿäº§ç¯å¢ƒä¹‹é—´çš„å·®å¼‚ï¼ŒåŠ é€Ÿäº†è½¯ä»¶äº¤ä»˜æµç¨‹ï¼Œå¹¶ä¸ºå¾®æœåŠ¡æ¶æ„å’ŒDevOpså®è·µæä¾›äº†å¼ºå¤§çš„æ”¯æŒã€‚</p>
<h3>1.2 å®éªŒç¯å¢ƒæ¦‚è¿° (CentOS 8)</h3>
<p>æœ¬å®éªŒæ‰‹å†Œå°†ä»¥ <strong>CentOS 8</strong> æ“ä½œç³»ç»Ÿä½œä¸ºåŸºç¡€ç¯å¢ƒï¼Œè¯¦ç»†æŒ‡å¯¼æ‚¨è¿›è¡ŒDockerçš„å®‰è£…ã€é…ç½®å’Œå„é¡¹æ“ä½œã€‚CentOS 8ä½œä¸ºä¸€æ¬¾ç¨³å®šã€ä¼ä¸šçº§çš„Linuxå‘è¡Œç‰ˆï¼Œå¹¿æ³›åº”ç”¨äºæœåŠ¡å™¨ç¯å¢ƒã€‚é€‰æ‹©CentOS 8æ—¨åœ¨æ¨¡æ‹ŸçœŸå®çš„ç”Ÿäº§ç¯å¢ƒï¼Œè®©æ‚¨åœ¨å®è·µä¸­æ›´å¥½åœ°ç†è§£Dockerçš„éƒ¨ç½²å’Œç®¡ç†ã€‚</p>
<p>è€ƒè™‘åˆ°ä¸­å›½å›½å†…çš„ç½‘ç»œç¯å¢ƒç‰¹ç‚¹ï¼Œæœ¬æ‰‹å†Œè¿˜å°†ç‰¹åˆ«å¼ºè°ƒ<strong>é…ç½®å›½å†…é•œåƒåŠ é€Ÿå™¨</strong>çš„æ­¥éª¤ï¼Œä»¥ç¡®ä¿æ‚¨åœ¨æ‹‰å–Dockeré•œåƒæ—¶èƒ½å¤Ÿè·å¾—æµç•…çš„ä½“éªŒã€‚</p>
<h3>1.3 å®éªŒç›®çš„</h3>
<p>æœ¬å®éªŒæ‰‹å†Œæ—¨åœ¨é€šè¿‡ä¸€ç³»åˆ—è¯¦ç»†çš„å®è·µæ“ä½œï¼Œå¸®åŠ©æ‚¨å…¨é¢æŒæ¡Dockerçš„æ ¸å¿ƒæ¦‚å¿µå’Œå¸¸ç”¨å‘½ä»¤ï¼Œå…·ä½“ç›®æ ‡åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>æŒæ¡Dockerçš„å®‰è£…ä¸åŸºæœ¬é…ç½®</strong>ï¼šåœ¨CentOS 8ç³»ç»Ÿä¸ŠæˆåŠŸå®‰è£…Docker Engineï¼Œå¹¶é…ç½®å›½å†…é•œåƒåŠ é€Ÿï¼Œä»¥åŠè®¾ç½®érootç”¨æˆ·ä½¿ç”¨Dockerã€‚</li>
<li><strong>ç†Ÿæ‚‰Dockerå®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†</strong>ï¼šå­¦ä¼šåˆ›å»ºã€å¯åŠ¨ã€åœæ­¢ã€é‡å¯ã€åˆ é™¤å®¹å™¨ï¼Œå¹¶è¿›è¡Œäº¤äº’å¼æ“ä½œã€æ—¥å¿—æŸ¥çœ‹å’Œèµ„æºç›‘æ§ã€‚</li>
<li><strong>ç†è§£Dockeré•œåƒçš„ç®¡ç†</strong>ï¼šæŒæ¡é•œåƒçš„è·å–ã€æŸ¥çœ‹ã€åˆ é™¤ã€æ„å»ºã€æ ‡è®°ã€æ¨é€ä»¥åŠå¯¼å…¥å¯¼å‡ºç­‰æ“ä½œã€‚</li>
<li><strong>å­¦ä¼šç¼–å†™å’Œä½¿ç”¨Dockerfile</strong>ï¼šé€šè¿‡Dockerfileè‡ªåŠ¨åŒ–æ„å»ºè‡ªå®šä¹‰é•œåƒï¼Œå¹¶äº†è§£å¤šé˜¶æ®µæ„å»ºå’Œæœ€ä½³å®è·µã€‚</li>
<li><strong>æŒæ¡Docker Composeè¿›è¡Œå¤šå®¹å™¨åº”ç”¨ç¼–æ’</strong>ï¼šä½¿ç”¨<code class="notranslate">docker-compose.yml</code>æ–‡ä»¶å®šä¹‰å’Œç®¡ç†å¤æ‚çš„ã€å¤šæœåŠ¡çš„åº”ç”¨ç¨‹åºã€‚</li>
</ul>
<p>é€šè¿‡å®Œæˆæœ¬æ‰‹å†Œä¸­çš„æ‰€æœ‰å®éªŒï¼Œæ‚¨å°†èƒ½å¤Ÿè‡ªä¿¡åœ°åœ¨å®é™…é¡¹ç›®ä¸­è¿ç”¨DockeræŠ€æœ¯ï¼Œæå‡æ‚¨çš„å¼€å‘å’Œè¿ç»´æ•ˆç‡ã€‚</p>
<h1>2. Dockerå®‰è£…ä¸é…ç½®</h1>
<p>æœ¬ç« èŠ‚å°†è¯¦ç»†æŒ‡å¯¼å¦‚ä½•åœ¨CentOS 8ç³»ç»Ÿä¸Šå®‰è£…Docker Engineï¼Œå¹¶è¿›è¡Œå¿…è¦çš„é…ç½®ï¼ŒåŒ…æ‹¬å›½å†…é•œåƒåŠ é€Ÿå’Œérootç”¨æˆ·ä½¿ç”¨Dockerçš„è®¾ç½®ã€‚è¿™äº›æ­¥éª¤æ—¨åœ¨ä¸ºåç»­çš„Dockerå®éªŒæä¾›ä¸€ä¸ªç¨³å®šä¸”é«˜æ•ˆçš„åŸºç¡€ç¯å¢ƒã€‚</p>
<h2>2.1 æ›´æ¢æºåŠDockeré•œåƒåŠ é€Ÿ</h2>
<p><strong>ä¸ºäº†é˜²æ­¢å‡ºé”™ï¼Œå…ˆå¤‡ä»½ç°æœ‰çš„ yum æºæ–‡ä»¶ï¼š</strong></p>
<div class="highlight highlight-source-shell"><pre class="notranslate">sudo mkdir -p /etc/yum.repos.d/backup
sudo mv /etc/yum.repos.d/<span class="pl-k">*</span>.repo /etc/yum.repos.d/backup/</pre></div>
<p><strong>æ›´æ¢é˜¿é‡Œäº‘yumæºï¼š</strong></p>
<div class="highlight highlight-source-shell"><pre class="notranslate">sudo tee /etc/yum.repos.d/CentOS-Base.repo <span class="pl-s"><span class="pl-k">&lt;&lt;</span> '<span class="pl-k">EOF</span>'</span>
<span class="pl-s">[BaseOS]</span>
<span class="pl-s">name=CentOS-$releasever - Base - mirrors.aliyun.com</span>
<span class="pl-s">baseurl=https://mirrors.aliyun.com/centos-vault/8.5.2111/BaseOS/\$basearch/os/</span>
<span class="pl-s">gpgcheck=1</span>
<span class="pl-s">enabled=1</span>
<span class="pl-s">gpgkey=https://mirrors.aliyun.com/centos-vault/8.5.2111/RPM-GPG-KEY-CentOS-Official</span>
<span class="pl-s"></span>
<span class="pl-s">[AppStream]</span>
<span class="pl-s">name=CentOS-$releasever - AppStream - mirrors.aliyun.com</span>
<span class="pl-s">baseurl=https://mirrors.aliyun.com/centos-vault/8.5.2111/AppStream/\$basearch/os/</span>
<span class="pl-s">gpgcheck=1</span>
<span class="pl-s">enabled=1</span>
<span class="pl-s">gpgkey=https://mirrors.aliyun.com/centos-vault/8.5.2111/RPM-GPG-KEY-CentOS-Official</span>
<span class="pl-s"></span>
<span class="pl-s">[extras]</span>
<span class="pl-s">name=CentOS-$releasever - Extras - mirrors.aliyun.com</span>
<span class="pl-s">baseurl=https://mirrors.aliyun.com/centos-vault/8.5.2111/extras/\$basearch/os/</span>
<span class="pl-s">gpgcheck=1</span>
<span class="pl-s">enabled=1</span>
<span class="pl-s">gpgkey=https://mirrors.aliyun.com/centos-vault/8.5.2111/RPM-GPG-KEY-CentOS-Official</span>
<span class="pl-s"><span class="pl-k">EOF</span></span></pre></div>
<p><strong>æ¸…é™¤ç¼“å­˜å¹¶é‡å»º</strong></p>
<div class="highlight highlight-source-shell"><pre class="notranslate">sudo dnf clean all
sudo dnf makecache</pre></div>
<p><strong>ä¸€æ­¥ä¿®å¤æ–¹æ¡ˆï¼šæ›¿æ¢ä¸ºå›½å†…dockeræº</strong></p>
<p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼ˆé€è¡Œå¤åˆ¶ï¼‰ğŸ‘‡ï¼š</p>
<div class="highlight highlight-source-shell"><pre class="notranslate"><span class="pl-c"><span class="pl-c">#</span> 1. åˆ é™¤æ‰å®˜æ–¹ Docker æº</span>
sudo rm -f /etc/yum.repos.d/docker-ce.repo

<span class="pl-c"><span class="pl-c">#</span> 2. æ·»åŠ é˜¿é‡Œäº‘é•œåƒæº</span>
sudo tee /etc/yum.repos.d/docker-ce.repo <span class="pl-s"><span class="pl-k">&lt;&lt;</span>-'<span class="pl-k">EOF</span>'</span>
<span class="pl-s">[docker-ce-stable]</span>
<span class="pl-s">name=Docker CE Stable - mirror.aliyun.com</span>
<span class="pl-s">baseurl=https://mirrors.aliyun.com/docker-ce/linux/centos/8/x86_64/stable/</span>
<span class="pl-s">enabled=1</span>
<span class="pl-s">gpgcheck=0</span>
<span class="pl-s"><span class="pl-k">EOF</span></span>

<span class="pl-c"><span class="pl-c">#</span> 3. æ¸…ç†ç¼“å­˜å¹¶åˆ·æ–°æº</span>
sudo dnf clean all
sudo dnf makecache</pre></div>
<p><strong>å®‰è£…docker</strong></p>
<div class="highlight highlight-source-shell"><pre class="notranslate">sudo dnf install -y docker-ce docker-ce-cli containerd.io</pre></div>
<blockquote>
<p>âœ… è¿™ä¼šä» <strong>mirrors.aliyun.com</strong> ä¸‹è½½æ‰€æœ‰ Docker ç›¸å…³ RPM åŒ…ï¼Œå›½å†…é€Ÿåº¦é£å¿«ã€‚</p>
</blockquote>
<hr>
<p><strong>å¯åŠ¨ Docker æœåŠ¡</strong></p>
<div class="highlight highlight-source-shell"><pre class="notranslate">sudo systemctl <span class="pl-c1">enable</span> --now docker</pre></div>
<p><strong>æµ‹è¯•æ˜¯å¦å¯ç”¨ï¼š</strong></p>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker version</pre></div>
<p>è‹¥è¾“å‡º Client/Server ç‰ˆæœ¬å·å³å®‰è£…æˆåŠŸã€‚</p>
<hr>
<p><strong>é…ç½®é•œåƒåŠ é€Ÿ</strong></p>
<p>ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼š</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">sudo mkdir -p /etc/docker
sudo tee /etc/docker/daemon.json <span class="pl-s"><span class="pl-k">&lt;&lt;</span>-'<span class="pl-k">EOF</span>'</span>
<span class="pl-s">{</span>
<span class="pl-s">  "registry-mirrors": [</span>
<span class="pl-s">    "https://docker.1panel.live",</span>
<span class="pl-s">    "https://mirror.ccs.tencentyun.com",</span>
<span class="pl-s">    "https://docker.m.daocloud.io",</span>
<span class="pl-s">    "https://hub-mirror.c.163.com"</span>
<span class="pl-s">  ]</span>
<span class="pl-s">}</span>
<span class="pl-s"><span class="pl-k">EOF</span></span></pre></div>
<p>é‡å¯æœåŠ¡ï¼š</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">sudo systemctl daemon-reload
sudo systemctl restart docker</pre></div>
<p>éªŒè¯ï¼š</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker info <span class="pl-k">|</span> grep -A3 <span class="pl-s"><span class="pl-pds">"</span>Registry Mirrors<span class="pl-pds">"</span></span></pre></div>
<hr>
<h2>ğŸ§° å¦‚æœä»ç„¶å¤±è´¥ï¼ˆå†…ç½‘æˆ–æ— å…¬ç½‘çš„æƒ…å†µï¼‰</h2>
<p>ä½ å¯ä»¥ï¼š</p>
<ol>
<li>
<p>æ‰‹åŠ¨ä¸‹è½½ RPM åŒ…ï¼š<br>
åœ¨ä¸€å°èƒ½ä¸Šç½‘çš„æœºå™¨ä¸Šè®¿é—®<br>
<a href="https://mirrors.aliyun.com/docker-ce/linux/centos/8/x86_64/stable/Packages/" rel="nofollow">https://mirrors.aliyun.com/docker-ce/linux/centos/8/x86_64/stable/Packages/</a><br>
ä¸‹è½½ä»¥ä¸‹ä¸‰ä¸ªåŒ…ï¼š</p>
<pre class="notranslate"><code class="notranslate">containerd.io-xxxx.rpm
docker-ce-xxxx.rpm
docker-ce-cli-xxxx.rpm
</code></pre>
<p>ç„¶åæ‹·è´åˆ°æœåŠ¡å™¨æ‰§è¡Œï¼š</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">sudo dnf localinstall <span class="pl-k">*</span>.rpm -y</pre></div>
</li>
</ol>
<hr>
<h2>2.5 DockeræœåŠ¡ç®¡ç†</h2>
<p>äº†è§£å¦‚ä½•ç®¡ç†DockeræœåŠ¡å¯¹äºæ—¥å¸¸ç»´æŠ¤è‡³å…³é‡è¦ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„<code class="notranslate">systemctl</code>å‘½ä»¤ï¼Œç”¨äºç®¡ç†Dockerå®ˆæŠ¤è¿›ç¨‹ï¼š</p>
<ul>
<li><strong>å¯åŠ¨DockeræœåŠ¡</strong>ï¼š</li>
</ul>
<div class="highlight highlight-source-shell"><pre class="notranslate">sudo systemctl start docker</pre></div>
<ul>
<li><strong>åœæ­¢DockeræœåŠ¡</strong>ï¼š</li>
</ul>
<div class="highlight highlight-source-shell"><pre class="notranslate">sudo systemctl stop docker</pre></div>
<ul>
<li><strong>é‡å¯DockeræœåŠ¡</strong>ï¼š</li>
</ul>
<div class="highlight highlight-source-shell"><pre class="notranslate">sudo systemctl restart docker</pre></div>
<ul>
<li><strong>æŸ¥çœ‹DockeræœåŠ¡çŠ¶æ€</strong>ï¼š</li>
</ul>
<div class="highlight highlight-source-shell"><pre class="notranslate">sudo systemctl status docker</pre></div>
<ul>
<li><strong>è®¾ç½®DockeræœåŠ¡å¼€æœºè‡ªå¯</strong>ï¼š</li>
</ul>
<div class="highlight highlight-source-shell"><pre class="notranslate">sudo systemctl <span class="pl-c1">enable</span> docker</pre></div>
<ul>
<li><strong>ç¦ç”¨DockeræœåŠ¡å¼€æœºè‡ªå¯</strong>ï¼š</li>
</ul>
<div class="highlight highlight-source-shell"><pre class="notranslate">sudo systemctl disable docker</pre></div>
<h1>3. Dockerå®¹å™¨ç®¡ç†</h1>
<p>Dockerå®¹å™¨æ˜¯Dockerçš„æ ¸å¿ƒæ¦‚å¿µï¼Œå®ƒæ˜¯ä¸€ä¸ªè½»é‡çº§ã€å¯ç§»æ¤ã€è‡ªç»™è‡ªè¶³çš„è½¯ä»¶åŒ…ï¼ŒåŒ…å«è¿è¡Œåº”ç”¨ç¨‹åºæ‰€éœ€çš„ä¸€åˆ‡ï¼šä»£ç ã€è¿è¡Œæ—¶ã€ç³»ç»Ÿå·¥å…·ã€ç³»ç»Ÿåº“ç­‰ã€‚æœ¬ç« èŠ‚å°†è¯¦ç»†ä»‹ç»å¦‚ä½•ç®¡ç†Dockerå®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸã€è¿›è¡Œå¸¸ç”¨æ“ä½œã€é…ç½®ç½‘ç»œä»¥åŠç®¡ç†æ•°æ®å·ã€‚</p>
<h2>3.1 å®¹å™¨ç”Ÿå‘½å‘¨æœŸç®¡ç†</h2>
<p>å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸåŒ…æ‹¬åˆ›å»ºã€å¯åŠ¨ã€åœæ­¢ã€é‡å¯å’Œåˆ é™¤ç­‰é˜¶æ®µã€‚æŒæ¡è¿™äº›åŸºæœ¬å‘½ä»¤æ˜¯è¿›è¡ŒDockeræ“ä½œçš„åŸºç¡€ã€‚</p>
<h3>3.1.1 åˆ›å»ºä¸å¯åŠ¨å®¹å™¨ (<code class="notranslate">docker run</code>)</h3>
<p><code class="notranslate">docker run</code> å‘½ä»¤ç”¨äºåˆ›å»ºå¹¶å¯åŠ¨ä¸€ä¸ªæ–°çš„å®¹å™¨ã€‚å®ƒæ˜¯Dockerä¸­æœ€å¸¸ç”¨çš„å‘½ä»¤ä¹‹ä¸€ï¼Œæ‹¥æœ‰ä¸°å¯Œçš„å‚æ•°æ¥æ§åˆ¶å®¹å™¨çš„è¡Œä¸ºã€‚</p>
<p><strong>åŸºæœ¬è¯­æ³•</strong>ï¼š</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker run [OPTIONS] IMAGE [COMMAND] [ARG...]</pre></div>
<p><strong>å¸¸ç”¨é€‰é¡¹</strong>ï¼š</p>
<ul>
<li><code class="notranslate">-d</code> æˆ– <code class="notranslate">--detach</code>ï¼šåå°è¿è¡Œå®¹å™¨ã€‚</li>
<li><code class="notranslate">-p</code> æˆ– <code class="notranslate">--publish</code>ï¼šç«¯å£æ˜ å°„ï¼Œæ ¼å¼ä¸º <code class="notranslate">å®¿ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£</code>ã€‚</li>
<li><code class="notranslate">-v</code> æˆ– <code class="notranslate">--volume</code>ï¼šæ•°æ®å·æŒ‚è½½ï¼Œæ ¼å¼ä¸º <code class="notranslate">å®¿ä¸»æœºè·¯å¾„:å®¹å™¨è·¯å¾„</code> æˆ– <code class="notranslate">æ•°æ®å·åç§°:å®¹å™¨è·¯å¾„</code>ã€‚</li>
<li><code class="notranslate">--name</code>ï¼šä¸ºå®¹å™¨æŒ‡å®šä¸€ä¸ªåç§°ã€‚</li>
<li><code class="notranslate">-it</code>ï¼šäº¤äº’å¼è¿è¡Œå®¹å™¨ï¼Œé€šå¸¸ç”¨äºè¿›å…¥å®¹å™¨çš„shellã€‚</li>
<li><code class="notranslate">--rm</code>ï¼šå®¹å™¨åœæ­¢åè‡ªåŠ¨åˆ é™¤ã€‚</li>
<li><code class="notranslate">--network</code>ï¼šæŒ‡å®šå®¹å™¨è¿æ¥çš„ç½‘ç»œã€‚</li>
</ul>
<p><strong>å®éªŒç¤ºä¾‹</strong>ï¼š</p>
<ol>
<li><strong>è¿è¡Œä¸€ä¸ªNginx WebæœåŠ¡å™¨å®¹å™¨</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker run -d -p 8080:80 --name my-nginx nginx:latest</pre></div>
<pre class="notranslate"><code class="notranslate">æ­¤å‘½ä»¤å°†ä»Docker Hubæ‹‰å–`nginx:latest`é•œåƒï¼ˆå¦‚æœæœ¬åœ°æ²¡æœ‰ï¼‰ï¼Œç„¶ååœ¨åå°è¿è¡Œä¸€ä¸ªåä¸º`my-nginx`çš„å®¹å™¨ï¼Œå¹¶å°†å®¿ä¸»æœºçš„8080ç«¯å£æ˜ å°„åˆ°å®¹å™¨çš„80ç«¯å£ã€‚
</code></pre>
<ol start="2">
<li><strong>è¿è¡Œä¸€ä¸ªäº¤äº’å¼Ubuntuå®¹å™¨</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker run -it --rm ubuntu:latest bash</pre></div>
<pre class="notranslate"><code class="notranslate">æ­¤å‘½ä»¤å°†å¯åŠ¨ä¸€ä¸ªUbuntuå®¹å™¨ï¼Œå¹¶è¿›å…¥å…¶bash shellã€‚`-it` é€‰é¡¹ä½¿å¾—å®¹å™¨å¯ä»¥äº¤äº’å¼è¿è¡Œï¼Œ`--rm` é€‰é¡¹ç¡®ä¿å®¹å™¨é€€å‡ºåè‡ªåŠ¨åˆ é™¤ã€‚
</code></pre>
<h3>3.1.2 æŸ¥çœ‹è¿è¡Œä¸­çš„å®¹å™¨ (<code class="notranslate">docker ps</code>)</h3>
<p><code class="notranslate">docker ps</code> å‘½ä»¤ç”¨äºåˆ—å‡ºå½“å‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨ã€‚</p>
<p><strong>åŸºæœ¬è¯­æ³•</strong>ï¼š</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker ps [OPTIONS]</pre></div>
<p><strong>å¸¸ç”¨é€‰é¡¹</strong>ï¼š</p>
<ul>
<li><code class="notranslate">-a</code> æˆ– <code class="notranslate">--all</code>ï¼šæ˜¾ç¤ºæ‰€æœ‰å®¹å™¨ï¼ŒåŒ…æ‹¬å·²åœæ­¢çš„ã€‚</li>
<li><code class="notranslate">-s</code> æˆ– <code class="notranslate">--size</code>ï¼šæ˜¾ç¤ºå®¹å™¨çš„æ€»æ–‡ä»¶å¤§å°ã€‚</li>
<li><code class="notranslate">-q</code> æˆ– <code class="notranslate">--quiet</code>ï¼šåªæ˜¾ç¤ºå®¹å™¨IDã€‚</li>
</ul>
<p><strong>å®éªŒç¤ºä¾‹</strong>ï¼š</p>
<ol>
<li><strong>æŸ¥çœ‹æ‰€æœ‰è¿è¡Œä¸­çš„å®¹å™¨</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker ps</pre></div>
<ol start="2">
<li><strong>æŸ¥çœ‹æ‰€æœ‰å®¹å™¨ï¼ˆåŒ…æ‹¬å·²åœæ­¢çš„ï¼‰</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker ps -a</pre></div>
<h3>3.1.3 åœæ­¢ã€å¯åŠ¨ä¸é‡å¯å®¹å™¨ (<code class="notranslate">docker stop</code>, <code class="notranslate">docker start</code>, <code class="notranslate">docker restart</code>)</h3>
<p>è¿™äº›å‘½ä»¤ç”¨äºæ§åˆ¶å®¹å™¨çš„è¿è¡ŒçŠ¶æ€ã€‚</p>
<p><strong>åŸºæœ¬è¯­æ³•</strong>ï¼š</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker stop [OPTIONS] CONTAINER [CONTAINER...]
docker start [OPTIONS] CONTAINER [CONTAINER...]
docker restart [OPTIONS] CONTAINER [CONTAINER...]</pre></div>
<p><strong>å®éªŒç¤ºä¾‹</strong>ï¼š</p>
<ol>
<li><strong>åœæ­¢åä¸º<code class="notranslate">my-nginx</code>çš„å®¹å™¨</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker stop my-nginx</pre></div>
<ol start="2">
<li><strong>å¯åŠ¨å·²åœæ­¢çš„<code class="notranslate">my-nginx</code>å®¹å™¨</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker start my-nginx</pre></div>
<ol start="3">
<li><strong>é‡å¯<code class="notranslate">my-nginx</code>å®¹å™¨</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker restart my-nginx</pre></div>
<h3>3.1.4 åˆ é™¤å®¹å™¨ (<code class="notranslate">docker rm</code>)</h3>
<p><code class="notranslate">docker rm</code> å‘½ä»¤ç”¨äºåˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªå·²åœæ­¢çš„å®¹å™¨ã€‚</p>
<p><strong>åŸºæœ¬è¯­æ³•</strong>ï¼š</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker rm [OPTIONS] CONTAINER [CONTAINER...]</pre></div>
<p><strong>å¸¸ç”¨é€‰é¡¹</strong>ï¼š</p>
<ul>
<li><code class="notranslate">-f</code> æˆ– <code class="notranslate">--force</code>ï¼šå¼ºåˆ¶åˆ é™¤è¿è¡Œä¸­çš„å®¹å™¨ã€‚</li>
<li><code class="notranslate">-v</code> æˆ– <code class="notranslate">--volumes</code>ï¼šåˆ é™¤ä¸å®¹å™¨å…³è”çš„åŒ¿åæ•°æ®å·ã€‚</li>
</ul>
<p><strong>å®éªŒç¤ºä¾‹</strong>ï¼š</p>
<ol>
<li><strong>åˆ é™¤å·²åœæ­¢çš„<code class="notranslate">my-nginx</code>å®¹å™¨</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker rm my-nginx</pre></div>
<ol start="2">
<li><strong>å¼ºåˆ¶åˆ é™¤è¿è¡Œä¸­çš„å®¹å™¨</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker rm -f my-nginx</pre></div>
<h2>3.2 å®¹å™¨æ“ä½œ</h2>
<p>é™¤äº†ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼ŒDockerè¿˜æä¾›äº†ä¸€ç³»åˆ—å‘½ä»¤æ¥ä¸å®¹å™¨è¿›è¡Œäº¤äº’å’Œç›‘æ§ã€‚</p>
<h3>3.2.1 è¿›å…¥å®¹å™¨ (<code class="notranslate">docker exec</code>)</h3>
<p><code class="notranslate">docker exec</code> å‘½ä»¤ç”¨äºåœ¨è¿è¡Œä¸­çš„å®¹å™¨å†…éƒ¨æ‰§è¡Œå‘½ä»¤ï¼Œå¸¸ç”¨äºè¿›å…¥å®¹å™¨çš„shellè¿›è¡Œè°ƒè¯•æˆ–é…ç½®ã€‚</p>
<p><strong>åŸºæœ¬è¯­æ³•</strong>ï¼š</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker <span class="pl-c1">exec</span> [OPTIONS] CONTAINER COMMAND [ARG...]</pre></div>
<p><strong>å¸¸ç”¨é€‰é¡¹</strong>ï¼š</p>
<ul>
<li><code class="notranslate">-it</code>ï¼šäº¤äº’å¼è¿è¡Œï¼Œå¹¶åˆ†é…ä¸€ä¸ªä¼ªTTYã€‚</li>
</ul>
<p><strong>å®éªŒç¤ºä¾‹</strong>ï¼š</p>
<ol>
<li><strong>è¿›å…¥<code class="notranslate">my-nginx</code>å®¹å™¨çš„bash shell</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker <span class="pl-c1">exec</span> -it my-nginx bash</pre></div>
<pre class="notranslate"><code class="notranslate">åœ¨å®¹å™¨å†…éƒ¨ï¼Œæ‚¨å¯ä»¥åƒæ“ä½œæ™®é€šLinuxç³»ç»Ÿä¸€æ ·æ‰§è¡Œå‘½ä»¤ï¼Œä¾‹å¦‚`ls -l /usr/share/nginx/html`ã€‚
</code></pre>
<h3>3.2.2 æŸ¥çœ‹å®¹å™¨æ—¥å¿— (<code class="notranslate">docker logs</code>)</h3>
<p><code class="notranslate">docker logs</code> å‘½ä»¤ç”¨äºè·å–å®¹å™¨çš„æ—¥å¿—è¾“å‡ºã€‚</p>
<p><strong>åŸºæœ¬è¯­æ³•</strong>ï¼š</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker logs [OPTIONS] CONTAINER</pre></div>
<p><strong>å¸¸ç”¨é€‰é¡¹</strong>ï¼š</p>
<ul>
<li><code class="notranslate">-f</code> æˆ– <code class="notranslate">--follow</code>ï¼šæŒç»­è¾“å‡ºæ—¥å¿—ã€‚</li>
<li><code class="notranslate">--tail</code>ï¼šæ˜¾ç¤ºæ—¥å¿—çš„æœ€åNè¡Œã€‚</li>
<li><code class="notranslate">-t</code> æˆ– <code class="notranslate">--timestamps</code>ï¼šæ˜¾ç¤ºæ—¶é—´æˆ³ã€‚</li>
</ul>
<p><strong>å®éªŒç¤ºä¾‹</strong>ï¼š</p>
<ol>
<li><strong>æŸ¥çœ‹<code class="notranslate">my-nginx</code>å®¹å™¨çš„å®æ—¶æ—¥å¿—</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker logs -f my-nginx</pre></div>
<h3>3.2.3 æŸ¥çœ‹å®¹å™¨è¯¦ç»†ä¿¡æ¯ (<code class="notranslate">docker inspect</code>)</h3>
<p><code class="notranslate">docker inspect</code> å‘½ä»¤è¿”å›Dockerå¯¹è±¡çš„ä½çº§ä¿¡æ¯ï¼ŒåŒ…æ‹¬å®¹å™¨ã€é•œåƒã€ç½‘ç»œã€æ•°æ®å·ç­‰ã€‚å®ƒä»¥JSONæ ¼å¼è¾“å‡ºè¯¦ç»†é…ç½®ã€‚</p>
<p><strong>åŸºæœ¬è¯­æ³•</strong>ï¼š</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker inspect [OPTIONS] NAME<span class="pl-k">|</span>ID [NAME<span class="pl-k">|</span>ID...]</pre></div>
<p><strong>å®éªŒç¤ºä¾‹</strong>ï¼š</p>
<ol>
<li><strong>æŸ¥çœ‹<code class="notranslate">my-nginx</code>å®¹å™¨çš„è¯¦ç»†ä¿¡æ¯</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker inspect my-nginx</pre></div>
<h3>3.2.4 æŸ¥çœ‹å®¹å™¨å†…è¿›ç¨‹ (<code class="notranslate">docker top</code>)</h3>
<p><code class="notranslate">docker top</code> å‘½ä»¤ç”¨äºæŸ¥çœ‹å®¹å™¨å†…éƒ¨è¿è¡Œçš„è¿›ç¨‹ã€‚</p>
<p><strong>åŸºæœ¬è¯­æ³•</strong>ï¼š</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker top CONTAINER [ps OPTIONS]</pre></div>
<p><strong>å®éªŒç¤ºä¾‹</strong>ï¼š</p>
<ol>
<li><strong>æŸ¥çœ‹<code class="notranslate">my-nginx</code>å®¹å™¨å†…çš„è¿›ç¨‹</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker top my-nginx</pre></div>
<h3>3.2.5 æŸ¥çœ‹å®¹å™¨èµ„æºä½¿ç”¨ (<code class="notranslate">docker stats</code>)</h3>
<p><code class="notranslate">docker stats</code> å‘½ä»¤ç”¨äºå®æ—¶æ˜¾ç¤ºä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨çš„èµ„æºä½¿ç”¨æƒ…å†µï¼ŒåŒ…æ‹¬CPUã€å†…å­˜ã€ç½‘ç»œI/Oå’Œå—I/Oã€‚</p>
<p><strong>åŸºæœ¬è¯­æ³•</strong>ï¼š</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker stats [OPTIONS] [CONTAINER...]</pre></div>
<p><strong>å¸¸ç”¨é€‰é¡¹</strong>ï¼š</p>
<ul>
<li><code class="notranslate">--no-stream</code>ï¼šä¸æŒç»­è¾“å‡ºï¼Œåªæ˜¾ç¤ºä¸€æ¬¡ã€‚</li>
</ul>
<p><strong>å®éªŒç¤ºä¾‹</strong>ï¼š</p>
<ol>
<li><strong>æŸ¥çœ‹æ‰€æœ‰è¿è¡Œä¸­å®¹å™¨çš„èµ„æºä½¿ç”¨æƒ…å†µ</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker stats</pre></div>
<h2>3.3 å®¹å™¨ç½‘ç»œ</h2>
<p>Dockeræä¾›äº†å¼ºå¤§çš„ç½‘ç»œåŠŸèƒ½ï¼Œå…è®¸å®¹å™¨ä¹‹é—´ä»¥åŠå®¹å™¨ä¸å®¿ä¸»æœºä¹‹é—´è¿›è¡Œé€šä¿¡ã€‚Dockeré»˜è®¤æä¾›å¤šç§ç½‘ç»œé©±åŠ¨ï¼Œå¦‚<code class="notranslate">bridge</code>ã€<code class="notranslate">host</code>ã€<code class="notranslate">none</code>ç­‰ï¼Œå¹¶æ”¯æŒç”¨æˆ·è‡ªå®šä¹‰ç½‘ç»œã€‚</p>
<h3>3.3.1 æŸ¥çœ‹ç½‘ç»œ (<code class="notranslate">docker network ls</code>)</h3>
<p><code class="notranslate">docker network ls</code> å‘½ä»¤ç”¨äºåˆ—å‡ºæ‰€æœ‰Dockerç½‘ç»œã€‚</p>
<p><strong>åŸºæœ¬è¯­æ³•</strong>ï¼š</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker network ls [OPTIONS]</pre></div>
<p><strong>å®éªŒç¤ºä¾‹</strong>ï¼š</p>
<ol>
<li><strong>åˆ—å‡ºæ‰€æœ‰Dockerç½‘ç»œ</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker network ls</pre></div>
<h3>3.3.2 åˆ›å»ºè‡ªå®šä¹‰ç½‘ç»œ (<code class="notranslate">docker network create</code>)</h3>
<p>åˆ›å»ºè‡ªå®šä¹‰ç½‘ç»œå¯ä»¥æ›´å¥½åœ°éš”ç¦»å®¹å™¨ï¼Œå¹¶å…è®¸å®¹å™¨é€šè¿‡åç§°è¿›è¡Œé€šä¿¡ã€‚</p>
<p><strong>åŸºæœ¬è¯­æ³•</strong>ï¼š</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker network create [OPTIONS] NETWORK</pre></div>
<p><strong>å¸¸ç”¨é€‰é¡¹</strong>ï¼š</p>
<ul>
<li><code class="notranslate">--driver</code>ï¼šæŒ‡å®šç½‘ç»œé©±åŠ¨ï¼Œé»˜è®¤ä¸º<code class="notranslate">bridge</code>ã€‚</li>
</ul>
<p><strong>å®éªŒç¤ºä¾‹</strong>ï¼š</p>
<ol>
<li><strong>åˆ›å»ºä¸€ä¸ªåä¸º<code class="notranslate">my-app-network</code>çš„bridgeç½‘ç»œ</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker network create my-app-network</pre></div>
<h3>3.3.3 è¿æ¥å®¹å™¨åˆ°ç½‘ç»œ (<code class="notranslate">docker network connect</code>)</h3>
<p>å°†è¿è¡Œä¸­çš„å®¹å™¨è¿æ¥åˆ°æŒ‡å®šçš„ç½‘ç»œã€‚</p>
<p><strong>åŸºæœ¬è¯­æ³•</strong>ï¼š</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker network connect [OPTIONS] NETWORK CONTAINER</pre></div>
<p><strong>å®éªŒç¤ºä¾‹</strong>ï¼š</p>
<ol>
<li><strong>å°†<code class="notranslate">my-nginx</code>å®¹å™¨è¿æ¥åˆ°<code class="notranslate">my-app-network</code></strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker network connect my-app-network my-nginx</pre></div>
<h3>3.3.4 æ–­å¼€å®¹å™¨ä¸ç½‘ç»œçš„è¿æ¥ (<code class="notranslate">docker network disconnect</code>)</h3>
<p>å°†å®¹å™¨ä»æŒ‡å®šçš„ç½‘ç»œä¸­ç§»é™¤ã€‚</p>
<p><strong>åŸºæœ¬è¯­æ³•</strong>ï¼š</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker network disconnect [OPTIONS] NETWORK CONTAINER</pre></div>
<p><strong>å®éªŒç¤ºä¾‹</strong>ï¼š</p>
<ol>
<li><strong>å°†<code class="notranslate">my-nginx</code>å®¹å™¨ä»<code class="notranslate">my-app-network</code>æ–­å¼€</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker network disconnect my-app-network my-nginx</pre></div>
<h3>3.3.5 åˆ é™¤ç½‘ç»œ (<code class="notranslate">docker network rm</code>)</h3>
<p>åˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªè‡ªå®šä¹‰ç½‘ç»œã€‚</p>
<p><strong>åŸºæœ¬è¯­æ³•</strong>ï¼š</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker network rm NETWORK [NETWORK...]</pre></div>
<p><strong>å®éªŒç¤ºä¾‹</strong>ï¼š</p>
<ol>
<li><strong>åˆ é™¤<code class="notranslate">my-app-network</code></strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker network rm my-app-network</pre></div>
<h2>3.4 å®¹å™¨æ•°æ®å·</h2>
<p>æ•°æ®å·æ˜¯ç”¨äºæŒä¹…åŒ–Dockerå®¹å™¨æ•°æ®æˆ–åœ¨å®¹å™¨ä¹‹é—´å…±äº«æ•°æ®çš„é¦–é€‰æœºåˆ¶ã€‚å®ƒç‹¬ç«‹äºå®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸï¼Œå³ä½¿å®¹å™¨è¢«åˆ é™¤ï¼Œæ•°æ®å·ä¸­çš„æ•°æ®ä¹Ÿä¸ä¼šä¸¢å¤±ã€‚</p>
<h3>3.4.1 åˆ›å»ºæ•°æ®å· (<code class="notranslate">docker volume create</code>)</h3>
<p><code class="notranslate">docker volume create</code> å‘½ä»¤ç”¨äºåˆ›å»ºä¸€ä¸ªæ–°çš„æ•°æ®å·ã€‚</p>
<p><strong>åŸºæœ¬è¯­æ³•</strong>ï¼š</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker volume create [OPTIONS] VOLUME</pre></div>
<p><strong>å®éªŒç¤ºä¾‹</strong>ï¼š</p>
<ol>
<li><strong>åˆ›å»ºä¸€ä¸ªåä¸º<code class="notranslate">my-data</code>çš„æ•°æ®å·</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker volume create my-data</pre></div>
<h3>3.4.2 æŸ¥çœ‹æ•°æ®å· (<code class="notranslate">docker volume ls</code>)</h3>
<p><code class="notranslate">docker volume ls</code> å‘½ä»¤ç”¨äºåˆ—å‡ºæ‰€æœ‰Dockeræ•°æ®å·ã€‚</p>
<p><strong>åŸºæœ¬è¯­æ³•</strong>ï¼š</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker volume ls [OPTIONS]</pre></div>
<p><strong>å®éªŒç¤ºä¾‹</strong>ï¼š</p>
<ol>
<li><strong>åˆ—å‡ºæ‰€æœ‰æ•°æ®å·</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker volume ls</pre></div>
<h3>3.4.3 æŒ‚è½½æ•°æ®å·åˆ°å®¹å™¨ (<code class="notranslate">docker run -v</code>)</h3>
<p>åœ¨<code class="notranslate">docker run</code>å‘½ä»¤ä¸­ä½¿ç”¨<code class="notranslate">-v</code>é€‰é¡¹å¯ä»¥å°†æ•°æ®å·æŒ‚è½½åˆ°å®¹å™¨å†…éƒ¨ã€‚</p>
<p><strong>å®éªŒç¤ºä¾‹</strong>ï¼š</p>
<ol>
<li><strong>è¿è¡Œä¸€ä¸ªNginxå®¹å™¨ï¼Œå¹¶å°†<code class="notranslate">my-data</code>æ•°æ®å·æŒ‚è½½åˆ°<code class="notranslate">/usr/share/nginx/html</code></strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker run -d -p 8081:80 --name nginx-with-volume -v my-data:/usr/share/nginx/html nginx:latest</pre></div>
<pre class="notranslate"><code class="notranslate">ç°åœ¨ï¼Œ`my-data`æ•°æ®å·ä¸­çš„å†…å®¹å°†ä½œä¸ºNginxçš„ç½‘é¡µæ ¹ç›®å½•ã€‚
</code></pre>
<ol start="2">
<li><strong>é€šè¿‡ç»‘å®šæŒ‚è½½ï¼ˆBind Mountï¼‰å°†å®¿ä¸»æœºç›®å½•æŒ‚è½½åˆ°å®¹å™¨</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">mkdir -p <span class="pl-k">~</span>/nginx-html
<span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span>&lt;h1&gt;Hello from Host!&lt;/h1&gt;<span class="pl-pds">"</span></span> <span class="pl-k">&gt;</span> <span class="pl-k">~</span>/nginx-html/index.html
docker run -d -p 8082:80 --name nginx-bind-mount -v <span class="pl-k">~</span>/nginx-html:/usr/share/nginx/html nginx:latest</pre></div>
<pre class="notranslate"><code class="notranslate">è¿™ä¼šå°†å®¿ä¸»æœºçš„`~/nginx-html`ç›®å½•å†…å®¹æ˜ å°„åˆ°å®¹å™¨çš„Nginxç½‘é¡µæ ¹ç›®å½•ã€‚
</code></pre>
<h3>3.4.4 æŸ¥çœ‹æ•°æ®å·è¯¦ç»†ä¿¡æ¯ (<code class="notranslate">docker volume inspect</code>)</h3>
<p><code class="notranslate">docker volume inspect</code> å‘½ä»¤ç”¨äºæŸ¥çœ‹æ•°æ®å·çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬å…¶æŒ‚è½½ç‚¹ç­‰ã€‚</p>
<p><strong>åŸºæœ¬è¯­æ³•</strong>ï¼š</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker volume inspect [OPTIONS] VOLUME [VOLUME...]</pre></div>
<p><strong>å®éªŒç¤ºä¾‹</strong>ï¼š</p>
<ol>
<li><strong>æŸ¥çœ‹<code class="notranslate">my-data</code>æ•°æ®å·çš„è¯¦ç»†ä¿¡æ¯</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker volume inspect my-data</pre></div>
<h3>3.4.5 åˆ é™¤æ•°æ®å· (<code class="notranslate">docker volume rm</code>)</h3>
<p><code class="notranslate">docker volume rm</code> å‘½ä»¤ç”¨äºåˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªæ•°æ®å·ã€‚è¯·æ³¨æ„ï¼Œåªæœ‰å½“æ•°æ®å·æ²¡æœ‰è¢«ä»»ä½•å®¹å™¨ä½¿ç”¨æ—¶æ‰èƒ½è¢«åˆ é™¤ã€‚</p>
<p><strong>åŸºæœ¬è¯­æ³•</strong>ï¼š</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker volume rm [OPTIONS] VOLUME [VOLUME...]</pre></div>
<p><strong>å¸¸ç”¨é€‰é¡¹</strong>ï¼š</p>
<ul>
<li><code class="notranslate">-f</code> æˆ– <code class="notranslate">--force</code>ï¼šå¼ºåˆ¶åˆ é™¤æ­£åœ¨ä½¿ç”¨çš„æ•°æ®å·ï¼ˆä¸æ¨èï¼‰ã€‚</li>
</ul>
<p><strong>å®éªŒç¤ºä¾‹</strong>ï¼š</p>
<ol>
<li><strong>åˆ é™¤<code class="notranslate">my-data</code>æ•°æ®å·</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker volume rm my-data</pre></div>
<h3>3.4.6 æ¸…ç†æœªä½¿ç”¨çš„æœ¬åœ°æ•°æ®å· (<code class="notranslate">docker volume prune</code>)</h3>
<p><code class="notranslate">docker volume prune</code> å‘½ä»¤ç”¨äºåˆ é™¤æ‰€æœ‰æœªè¢«ä»»ä½•å®¹å™¨å¼•ç”¨çš„æœ¬åœ°æ•°æ®å·ã€‚</p>
<p><strong>åŸºæœ¬è¯­æ³•</strong>ï¼š</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker volume prune [OPTIONS]</pre></div>
<p><strong>å®éªŒç¤ºä¾‹</strong>ï¼š</p>
<ol>
<li><strong>æ¸…ç†æ‰€æœ‰æœªä½¿ç”¨çš„æœ¬åœ°æ•°æ®å·</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker volume prune</pre></div>
<p>é€šè¿‡æœ¬ç« èŠ‚çš„å­¦ä¹ å’Œå®è·µï¼Œæ‚¨åº”è¯¥å·²ç»æŒæ¡äº†Dockerå®¹å™¨çš„åŸºæœ¬ç®¡ç†å’Œæ“ä½œï¼ŒåŒ…æ‹¬å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸã€äº¤äº’ã€ç›‘æ§ã€ç½‘ç»œé…ç½®ä»¥åŠæ•°æ®æŒä¹…åŒ–ã€‚è¿™äº›æ˜¯æ„å»ºå’Œç®¡ç†åŸºäºDockerçš„åº”ç”¨ç¨‹åºçš„å…³é”®æŠ€èƒ½ã€‚</p>
<h1>4. Dockeré•œåƒç®¡ç†</h1>
<p>Dockeré•œåƒæ˜¯ä¸€ä¸ªè½»é‡çº§ã€ç‹¬ç«‹ã€å¯æ‰§è¡Œçš„è½¯ä»¶åŒ…ï¼Œå®ƒåŒ…å«äº†è¿è¡ŒæŸä¸ªè½¯ä»¶æ‰€éœ€çš„æ‰€æœ‰å†…å®¹ï¼ŒåŒ…æ‹¬ä»£ç ã€è¿è¡Œæ—¶ã€åº“ã€ç¯å¢ƒå˜é‡å’Œé…ç½®æ–‡ä»¶ã€‚æœ¬ç« èŠ‚å°†è¯¦ç»†ä»‹ç»å¦‚ä½•è·å–ã€æŸ¥çœ‹ã€åˆ é™¤ã€æ„å»ºã€æ ‡è®°ã€æ¨é€ä»¥åŠå¯¼å…¥/å¯¼å‡ºDockeré•œåƒã€‚</p>
<h2>4.1 é•œåƒè·å– (<code class="notranslate">docker pull</code>)</h2>
<p><code class="notranslate">docker pull</code> å‘½ä»¤ç”¨äºä»è¿œç¨‹é•œåƒä»“åº“ï¼ˆé»˜è®¤ä¸ºDocker Hubï¼‰ä¸‹è½½é•œåƒåˆ°æœ¬åœ°ã€‚</p>
<p><strong>åŸºæœ¬è¯­æ³•</strong>ï¼š</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker pull [OPTIONS] NAME[:TAG<span class="pl-k">|</span>@DIGEST]</pre></div>
<p><strong>å¸¸ç”¨é€‰é¡¹</strong>ï¼š</p>
<ul>
<li><code class="notranslate">--all-tags</code>ï¼šä¸‹è½½ä»“åº“ä¸­çš„æ‰€æœ‰æ ‡ç­¾é•œåƒã€‚</li>
</ul>
<p><strong>å®éªŒç¤ºä¾‹</strong>ï¼š</p>
<ol>
<li><strong>æ‹‰å–æœ€æ–°ç‰ˆUbuntué•œåƒ</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker pull ubuntu:latest</pre></div>
<ol start="2">
<li><strong>æ‹‰å–æŒ‡å®šç‰ˆæœ¬çš„Nginxé•œåƒ</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker pull nginx:1.21</pre></div>
<h2>4.2 é•œåƒæŸ¥çœ‹ (<code class="notranslate">docker images</code>)</h2>
<p><code class="notranslate">docker images</code> æˆ– <code class="notranslate">docker image ls</code> å‘½ä»¤ç”¨äºåˆ—å‡ºæœ¬åœ°ä¸»æœºä¸Šçš„æ‰€æœ‰é•œåƒã€‚</p>
<p><strong>åŸºæœ¬è¯­æ³•</strong>ï¼š</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker images [OPTIONS] [REPOSITORY]</pre></div>
<p><strong>å¸¸ç”¨é€‰é¡¹</strong>ï¼š</p>
<ul>
<li><code class="notranslate">-a</code> æˆ– <code class="notranslate">--all</code>ï¼šæ˜¾ç¤ºæ‰€æœ‰é•œåƒï¼ˆåŒ…æ‹¬ä¸­é—´å±‚é•œåƒï¼‰ã€‚</li>
<li><code class="notranslate">-q</code> æˆ– <code class="notranslate">--quiet</code>ï¼šåªæ˜¾ç¤ºé•œåƒIDã€‚</li>
<li><code class="notranslate">--filter</code>ï¼šæ ¹æ®æ¡ä»¶è¿‡æ»¤æ˜¾ç¤ºç»“æœï¼Œä¾‹å¦‚ <code class="notranslate">dangling=true</code> (æ˜¾ç¤ºæ‚¬ç©ºé•œåƒ)ã€‚</li>
</ul>
<p><strong>å®éªŒç¤ºä¾‹</strong>ï¼š</p>
<ol>
<li><strong>åˆ—å‡ºæ‰€æœ‰æœ¬åœ°é•œåƒ</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker images</pre></div>
<ol start="2">
<li><strong>åªæ˜¾ç¤ºé•œåƒID</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker images -q</pre></div>
<ol start="3">
<li><strong>æŸ¥çœ‹ç‰¹å®šä»“åº“çš„é•œåƒ</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker images ubuntu</pre></div>
<h2>4.3 é•œåƒåˆ é™¤ (<code class="notranslate">docker rmi</code>)</h2>
<p><code class="notranslate">docker rmi</code> å‘½ä»¤ç”¨äºåˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªæœ¬åœ°é•œåƒã€‚</p>
<p><strong>åŸºæœ¬è¯­æ³•</strong>ï¼š</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker rmi [OPTIONS] IMAGE [IMAGE...]</pre></div>
<p><strong>å¸¸ç”¨é€‰é¡¹</strong>ï¼š</p>
<ul>
<li><code class="notranslate">-f</code> æˆ– <code class="notranslate">--force</code>ï¼šå¼ºåˆ¶åˆ é™¤é•œåƒï¼Œå³ä½¿å®ƒè¢«å®¹å™¨ä½¿ç”¨ã€‚</li>
<li><code class="notranslate">--no-prune</code>ï¼šä¸åˆ é™¤æœªè¢«æ ‡è®°çš„çˆ¶é•œåƒã€‚</li>
</ul>
<p><strong>å®éªŒç¤ºä¾‹</strong>ï¼š</p>
<ol>
<li><strong>åˆ é™¤<code class="notranslate">nginx:1.21</code>é•œåƒ</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker rmi nginx:1.21</pre></div>
<ol start="2">
<li><strong>å¼ºåˆ¶åˆ é™¤ä¸€ä¸ªè¢«å®¹å™¨ä½¿ç”¨çš„é•œåƒ</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker rmi -f ubuntu:latest</pre></div>
<ol start="3">
<li><strong>åˆ é™¤æ‰€æœ‰æ‚¬ç©ºé•œåƒï¼ˆæ²¡æœ‰è¢«ä»»ä½•æ ‡ç­¾å¼•ç”¨çš„é•œåƒï¼‰</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker image prune</pre></div>
<h2>4.4 é•œåƒæ„å»º (<code class="notranslate">docker build</code>)</h2>
<p><code class="notranslate">docker build</code> å‘½ä»¤ç”¨äºæ ¹æ®Dockerfileæ–‡ä»¶å’Œä¸Šä¸‹æ–‡æ„å»ºæ–°çš„Dockeré•œåƒã€‚Dockerfileæ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼ŒåŒ…å«äº†ä¸€ç³»åˆ—æ„å»ºé•œåƒçš„æŒ‡ä»¤ã€‚</p>
<p><strong>åŸºæœ¬è¯­æ³•</strong>ï¼š</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker build [OPTIONS] PATH <span class="pl-k">|</span> URL <span class="pl-k">|</span> -</pre></div>
<p><strong>å¸¸ç”¨é€‰é¡¹</strong>ï¼š</p>
<ul>
<li><code class="notranslate">-t</code> æˆ– <code class="notranslate">--tag</code>ï¼šä¸ºæ„å»ºçš„é•œåƒæŒ‡å®šåç§°å’Œæ ‡ç­¾ï¼Œæ ¼å¼ä¸º <code class="notranslate">name:tag</code>ã€‚</li>
<li><code class="notranslate">-f</code> æˆ– <code class="notranslate">--file</code>ï¼šæŒ‡å®šDockerfileæ–‡ä»¶çš„è·¯å¾„ï¼ˆå¦‚æœä¸æ˜¯é»˜è®¤çš„<code class="notranslate">./Dockerfile</code>ï¼‰ã€‚</li>
<li><code class="notranslate">--no-cache</code>ï¼šæ„å»ºé•œåƒæ—¶ä¸ä½¿ç”¨ç¼“å­˜ã€‚</li>
</ul>
<p><strong>å®éªŒç¤ºä¾‹</strong>ï¼š</p>
<ol>
<li>
<p><strong>å‡†å¤‡Dockerfile</strong>ï¼š</p>
<p>é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªåä¸º<code class="notranslate">my-app</code>çš„ç›®å½•ï¼Œå¹¶åœ¨å…¶ä¸­åˆ›å»º<code class="notranslate">Dockerfile</code>æ–‡ä»¶å’Œ<code class="notranslate">app.py</code>æ–‡ä»¶ã€‚</p>
</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">mkdir -p my-app
cat <span class="pl-s"><span class="pl-k">&lt;&lt;</span><span class="pl-k">EOF</span> &gt; my-app/Dockerfile</span>
<span class="pl-s">FROM python:3.9-slim-buster</span>
<span class="pl-s">WORKDIR /app</span>
<span class="pl-s">COPY . .</span>
<span class="pl-s">RUN pip install Flask</span>
<span class="pl-s">EXPOSE 5000</span>
<span class="pl-s">CMD ["python", "app.py"]</span>
<span class="pl-s"><span class="pl-k">EOF</span></span>

<span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span>Flask<span class="pl-pds">"</span></span> <span class="pl-k">&gt;</span> requirements.txt

cat <span class="pl-s"><span class="pl-k">&lt;&lt;</span><span class="pl-k">EOF</span> &gt; my-app/app.py</span>
<span class="pl-s">from flask import Flask</span>
<span class="pl-s">app = Flask(__name__)</span>
<span class="pl-s"></span>
<span class="pl-s">@app.route("/")</span>
<span class="pl-s">def hello():</span>
<span class="pl-s">    return "Hello from Docker!"</span>
<span class="pl-s"></span>
<span class="pl-s">if __name__ == "__main__":</span>
<span class="pl-s">    app.run(host="0.0.0.0", port=5000)</span>
<span class="pl-s"><span class="pl-k">EOF</span></span></pre></div>
<ol start="2">
<li>
<p><strong>æ„å»ºé•œåƒ</strong>ï¼š</p>
<p>åœ¨<code class="notranslate">my-app</code>ç›®å½•ä¸‹æ‰§è¡Œï¼š</p>
</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker build -t my-python-app:1.0 my-app</pre></div>
<pre class="notranslate"><code class="notranslate">è¿™é‡Œçš„`my-app`è¡¨ç¤ºDockerfileæ‰€åœ¨çš„ä¸Šä¸‹æ–‡è·¯å¾„ã€‚
</code></pre>
<ol start="3">
<li><strong>è¿è¡Œæ„å»ºçš„é•œåƒ</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker run -d -p 5000:5000 --name my-web-app my-python-app:1.0</pre></div>
<pre class="notranslate"><code class="notranslate">è®¿é—® `http://localhost:5000` å³å¯çœ‹åˆ° "Hello from Docker!"ã€‚
</code></pre>
<h2>4.5 é•œåƒæ ‡ç­¾ä¸æ¨é€ (<code class="notranslate">docker tag</code>, <code class="notranslate">docker push</code>)</h2>
<p><code class="notranslate">docker tag</code> å‘½ä»¤ç”¨äºä¸ºé•œåƒæ·»åŠ ä¸€ä¸ªé¢å¤–çš„æ ‡ç­¾ï¼Œé€šå¸¸ç”¨äºå°†æœ¬åœ°é•œåƒæ ‡è®°ä¸ºå‡†å¤‡æ¨é€åˆ°è¿œç¨‹ä»“åº“çš„æ ¼å¼ã€‚<code class="notranslate">docker push</code> å‘½ä»¤ç”¨äºå°†æœ¬åœ°é•œåƒæ¨é€åˆ°è¿œç¨‹é•œåƒä»“åº“ã€‚</p>
<h3>4.5.1 æ ‡è®°é•œåƒ (<code class="notranslate">docker tag</code>)</h3>
<p><strong>åŸºæœ¬è¯­æ³•</strong>ï¼š</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker tag SOURCE_IMAGE[:TAG] TARGET_IMAGE[:TAG]</pre></div>
<p><strong>å®éªŒç¤ºä¾‹</strong>ï¼š</p>
<ol>
<li>
<p><strong>ä¸º<code class="notranslate">my-python-app:1.0</code>é•œåƒæ·»åŠ ä¸€ä¸ªæ–°æ ‡ç­¾ï¼Œå‡†å¤‡æ¨é€åˆ°Docker Hub</strong>ï¼š</p>
<p>å‡è®¾æ‚¨çš„Docker Hubç”¨æˆ·åä¸º<code class="notranslate">your_dockerhub_username</code>ã€‚</p>
</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker tag my-python-app:1.0 your_dockerhub_username/my-python-app:latest</pre></div>
<h3>4.5.2 ç™»å½•Docker Hub (<code class="notranslate">docker login</code>)</h3>
<p>åœ¨æ¨é€é•œåƒä¹‹å‰ï¼Œæ‚¨éœ€è¦ç™»å½•åˆ°Docker Hubæˆ–å…¶ä»–è¿œç¨‹ä»“åº“ã€‚</p>
<p><strong>åŸºæœ¬è¯­æ³•</strong>ï¼š</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker login [OPTIONS] [SERVER]</pre></div>
<p><strong>å®éªŒç¤ºä¾‹</strong>ï¼š</p>
<ol>
<li><strong>ç™»å½•Docker Hub</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker login</pre></div>
<pre class="notranslate"><code class="notranslate">ç³»ç»Ÿä¼šæç¤ºæ‚¨è¾“å…¥Docker Hubç”¨æˆ·åå’Œå¯†ç ã€‚
</code></pre>
<h3>4.5.3 æ¨é€é•œåƒ (<code class="notranslate">docker push</code>)</h3>
<p><strong>åŸºæœ¬è¯­æ³•</strong>ï¼š</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker push [OPTIONS] NAME[:TAG]</pre></div>
<p><strong>å®éªŒç¤ºä¾‹</strong>ï¼š</p>
<ol>
<li><strong>æ¨é€<code class="notranslate">my-python-app</code>é•œåƒåˆ°Docker Hub</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker push your_dockerhub_username/my-python-app:latest</pre></div>
<h2>4.6 é•œåƒå¯¼å…¥å¯¼å‡º (<code class="notranslate">docker save</code>, <code class="notranslate">docker load</code>)</h2>
<p><code class="notranslate">docker save</code> å’Œ <code class="notranslate">docker load</code> å‘½ä»¤ç”¨äºå°†é•œåƒæ‰“åŒ…æˆæ–‡ä»¶è¿›è¡Œä¼ è¾“ï¼Œæˆ–ä»æ–‡ä»¶åŠ è½½é•œåƒã€‚</p>
<h3>4.6.1 å¯¼å‡ºé•œåƒ (<code class="notranslate">docker save</code>)</h3>
<p><code class="notranslate">docker save</code> å‘½ä»¤å°†ä¸€ä¸ªæˆ–å¤šä¸ªé•œåƒä¿å­˜åˆ°ä¸€ä¸ªtarå½’æ¡£æ–‡ä»¶ä¸­ã€‚</p>
<p><strong>åŸºæœ¬è¯­æ³•</strong>ï¼š</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker save [OPTIONS] IMAGE [IMAGE...]</pre></div>
<p><strong>å¸¸ç”¨é€‰é¡¹</strong>ï¼š</p>
<ul>
<li><code class="notranslate">-o</code> æˆ– <code class="notranslate">--output</code>ï¼šæŒ‡å®šè¾“å‡ºæ–‡ä»¶è·¯å¾„ã€‚</li>
</ul>
<p><strong>å®éªŒç¤ºä¾‹</strong>ï¼š</p>
<ol>
<li><strong>å°†<code class="notranslate">my-python-app:1.0</code>é•œåƒä¿å­˜åˆ°<code class="notranslate">my-python-app.tar</code>æ–‡ä»¶</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker save -o my-python-app.tar my-python-app:1.0</pre></div>
<h3>4.6.2 å¯¼å…¥é•œåƒ (<code class="notranslate">docker load</code>)</h3>
<p><code class="notranslate">docker load</code> å‘½ä»¤ä»ä¸€ä¸ªtarå½’æ¡£æ–‡ä»¶æˆ–æ ‡å‡†è¾“å…¥ä¸­åŠ è½½é•œåƒã€‚</p>
<p><strong>åŸºæœ¬è¯­æ³•</strong>ï¼š</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker load [OPTIONS]</pre></div>
<p><strong>å¸¸ç”¨é€‰é¡¹</strong>ï¼š</p>
<ul>
<li><code class="notranslate">-i</code> æˆ– <code class="notranslate">--input</code>ï¼šæŒ‡å®šè¾“å…¥æ–‡ä»¶è·¯å¾„ã€‚</li>
</ul>
<p><strong>å®éªŒç¤ºä¾‹</strong>ï¼š</p>
<ol>
<li><strong>ä»<code class="notranslate">my-python-app.tar</code>æ–‡ä»¶åŠ è½½é•œåƒ</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker load -i my-python-app.tar</pre></div>
<p>é€šè¿‡æœ¬ç« èŠ‚çš„å­¦ä¹ å’Œå®è·µï¼Œæ‚¨åº”è¯¥å·²ç»æŒæ¡äº†Dockeré•œåƒçš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼ŒåŒ…æ‹¬ä»è¿œç¨‹ä»“åº“è·å–ã€æœ¬åœ°æŸ¥çœ‹ä¸åˆ é™¤ã€é€šè¿‡Dockerfileæ„å»ºè‡ªå®šä¹‰é•œåƒã€ä»¥åŠé•œåƒçš„æ ‡è®°ã€æ¨é€ã€å¯¼å…¥å’Œå¯¼å‡ºã€‚è¿™äº›æŠ€èƒ½æ˜¯é«˜æ•ˆåˆ©ç”¨Dockerè¿›è¡Œåº”ç”¨éƒ¨ç½²å’Œåˆ†å‘çš„åŸºç¡€ã€‚</p>
<h1>5. Dockerfile</h1>
<p>Dockerfileæ˜¯ç”¨äºæ„å»ºDockeré•œåƒçš„æ–‡æœ¬æ–‡ä»¶ï¼Œå®ƒåŒ…å«äº†ä¸€ç³»åˆ—æŒ‡ä»¤ï¼Œæ¯æ¡æŒ‡ä»¤éƒ½åœ¨é•œåƒä¸­åˆ›å»ºä¸€ä¸ªå±‚ã€‚é€šè¿‡Dockerfileï¼Œæˆ‘ä»¬å¯ä»¥è‡ªåŠ¨åŒ–é•œåƒçš„åˆ›å»ºè¿‡ç¨‹ï¼Œå®ç°å¯é‡å¤ã€ç‰ˆæœ¬åŒ–çš„é•œåƒæ„å»ºã€‚æœ¬ç« èŠ‚å°†æ·±å…¥æ¢è®¨Dockerfileçš„åŸºæœ¬è¯­æ³•ã€å¸¸ç”¨æŒ‡ä»¤ã€æ„å»ºè‡ªå®šä¹‰é•œåƒã€å¤šé˜¶æ®µæ„å»ºä»¥åŠæœ€ä½³å®è·µã€‚</p>
<h2>5.1 DockerfileåŸºæœ¬è¯­æ³•ä¸æŒ‡ä»¤</h2>
<p>Dockerfileä¸­çš„æŒ‡ä»¤æŒ‰é¡ºåºæ‰§è¡Œï¼Œæ¯æ¡æŒ‡ä»¤éƒ½ä¼šåœ¨é•œåƒä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„å±‚ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›æœ€å¸¸ç”¨çš„DockerfileæŒ‡ä»¤åŠå…¶ç”¨é€”ã€‚</p>
<h3>5.1.1 <code class="notranslate">FROM</code></h3>
<p><code class="notranslate">FROM</code> æŒ‡ä»¤æŒ‡å®šäº†æ–°é•œåƒæ‰€åŸºäºçš„åŸºç¡€é•œåƒã€‚æ‰€æœ‰Dockerfileéƒ½å¿…é¡»ä»¥ <code class="notranslate">FROM</code> æŒ‡ä»¤å¼€å§‹ã€‚</p>
<p><strong>è¯­æ³•</strong>ï¼š<code class="notranslate">FROM &lt;image&gt;[:&lt;tag&gt;] [AS &lt;name&gt;]</code></p>
<div class="highlight highlight-source-dockerfile"><pre class="notranslate"><span class="pl-k">FROM</span> ubuntu:22.04
<span class="pl-k">FROM</span> python:3.9-slim-buster AS builder</pre></div>
<h3>5.1.2 <code class="notranslate">RUN</code></h3>
<p><code class="notranslate">RUN</code> æŒ‡ä»¤ç”¨äºåœ¨å½“å‰é•œåƒå±‚ä¸Šæ‰§è¡Œå‘½ä»¤ï¼Œå¹¶æäº¤ç»“æœã€‚å®ƒé€šå¸¸ç”¨äºå®‰è£…è½¯ä»¶åŒ…ã€åˆ›å»ºæ–‡ä»¶æˆ–ç›®å½•ç­‰ã€‚</p>
<p><strong>è¯­æ³•</strong>ï¼š</p>
<ul>
<li><code class="notranslate">RUN &lt;command&gt;</code> (shell æ ¼å¼ï¼Œå‘½ä»¤åœ¨ <code class="notranslate">/bin/sh -c</code> ä¸­è¿è¡Œ)</li>
<li><code class="notranslate">RUN ["executable", "param1", "param2"]</code> (exec æ ¼å¼ï¼Œæ¨èï¼Œé¿å…shellè§£é‡Šå™¨é—®é¢˜)</li>
</ul>
<div class="highlight highlight-source-dockerfile"><pre class="notranslate"><span class="pl-k">RUN</span> apt-get update &amp;&amp; apt-get install -y curl
<span class="pl-k">RUN</span> [<span class="pl-s">"/bin/bash"</span>, <span class="pl-s">"-c"</span>, <span class="pl-s">"echo hello"</span>]</pre></div>
<h3>5.1.3 <code class="notranslate">CMD</code></h3>
<p><code class="notranslate">CMD</code> æŒ‡ä»¤ä¸ºæ‰§è¡Œä¸­çš„å®¹å™¨æä¾›é»˜è®¤çš„æ‰§è¡Œå‘½ä»¤ã€‚å¦‚æœ <code class="notranslate">docker run</code> å‘½ä»¤ä¸­æŒ‡å®šäº†å…¶ä»–å‘½ä»¤ï¼Œåˆ™ <code class="notranslate">CMD</code> å‘½ä»¤ä¼šè¢«è¦†ç›–ã€‚ä¸€ä¸ªDockerfileä¸­åªèƒ½æœ‰ä¸€ä¸ª <code class="notranslate">CMD</code> æŒ‡ä»¤ï¼Œå¦‚æœæœ‰å¤šä¸ªï¼Œåªæœ‰æœ€åä¸€ä¸ªç”Ÿæ•ˆã€‚</p>
<p><strong>è¯­æ³•</strong>ï¼š</p>
<ul>
<li><code class="notranslate">CMD ["executable","param1","param2"]</code> (exec æ ¼å¼ï¼Œæ¨è)</li>
<li><code class="notranslate">CMD ["param1","param2"]</code> (ä½œä¸º <code class="notranslate">ENTRYPOINT</code> çš„é»˜è®¤å‚æ•°)</li>
<li><code class="notranslate">CMD command param1 param2</code> (shell æ ¼å¼)</li>
</ul>
<div class="highlight highlight-source-dockerfile"><pre class="notranslate"><span class="pl-k">CMD</span> [<span class="pl-s">"nginx"</span>, <span class="pl-s">"-g"</span>, <span class="pl-s">"daemon off;"</span>]
<span class="pl-k">CMD</span> [<span class="pl-s">"python"</span>, <span class="pl-s">"app.py"</span>]</pre></div>
<h3>5.1.4 <code class="notranslate">ENTRYPOINT</code></h3>
<p><code class="notranslate">ENTRYPOINT</code> æŒ‡ä»¤é…ç½®å®¹å™¨å¯åŠ¨æ—¶æ‰§è¡Œçš„å‘½ä»¤ã€‚ä¸ <code class="notranslate">CMD</code> ä¸åŒï¼Œ<code class="notranslate">ENTRYPOINT</code> ä¸ä¼šè¢« <code class="notranslate">docker run</code> å‘½ä»¤ä¸­æŒ‡å®šçš„å‚æ•°è¦†ç›–ï¼Œè€Œæ˜¯å°†è¿™äº›å‚æ•°ä½œä¸º <code class="notranslate">ENTRYPOINT</code> å‘½ä»¤çš„å‚æ•°ã€‚</p>
<p><strong>è¯­æ³•</strong>ï¼š</p>
<ul>
<li><code class="notranslate">ENTRYPOINT ["executable", "param1", "param2"]</code> (exec æ ¼å¼ï¼Œæ¨è)</li>
<li><code class="notranslate">ENTRYPOINT command param1 param2</code> (shell æ ¼å¼)</li>
</ul>
<div class="highlight highlight-source-dockerfile"><pre class="notranslate"><span class="pl-k">ENTRYPOINT</span> [<span class="pl-s">"/usr/bin/cowsay"</span>]
<span class="pl-k">CMD</span> [<span class="pl-s">"hello world"</span>]</pre></div>
<p>è¿è¡Œ <code class="notranslate">docker run my-cowsay-image</code> ä¼šè¾“å‡º <code class="notranslate">hello world</code>ã€‚è¿è¡Œ <code class="notranslate">docker run my-cowsay-image moo</code> ä¼šè¾“å‡º <code class="notranslate">moo</code>ã€‚</p>
<h3>5.1.5 <code class="notranslate">COPY</code></h3>
<p><code class="notranslate">COPY</code> æŒ‡ä»¤å°†æœ¬åœ°æ–‡ä»¶æˆ–ç›®å½•å¤åˆ¶åˆ°é•œåƒä¸­çš„æŒ‡å®šè·¯å¾„ã€‚</p>
<p><strong>è¯­æ³•</strong>ï¼š<code class="notranslate">COPY [--chown=&lt;user&gt;:&lt;group&gt;] &lt;src&gt;... &lt;dest&gt;</code></p>
<div class="highlight highlight-source-dockerfile"><pre class="notranslate"><span class="pl-k">COPY</span> . /app
<span class="pl-k">COPY</span> requirements.txt /tmp/</pre></div>
<h3>5.1.6 <code class="notranslate">ADD</code></h3>
<p><code class="notranslate">ADD</code> æŒ‡ä»¤ä¸ <code class="notranslate">COPY</code> ç±»ä¼¼ï¼Œä½†å®ƒæ”¯æŒURLå’Œè‡ªåŠ¨è§£å‹taræ–‡ä»¶ã€‚é€šå¸¸æ¨èä½¿ç”¨ <code class="notranslate">COPY</code>ï¼Œå› ä¸ºå®ƒæ›´é€æ˜ã€‚</p>
<p><strong>è¯­æ³•</strong>ï¼š<code class="notranslate">ADD [--chown=&lt;user&gt;:&lt;group&gt;] &lt;src&gt;... &lt;dest&gt;</code></p>
<div class="highlight highlight-source-dockerfile"><pre class="notranslate"><span class="pl-k">ADD</span> http://example.com/latest.tar.gz /tmp/
<span class="pl-k">ADD</span> app.tar.gz /app</pre></div>
<h3>5.1.7 <code class="notranslate">WORKDIR</code></h3>
<p><code class="notranslate">WORKDIR</code> æŒ‡ä»¤ä¸ºDockerfileä¸­åç»­çš„ <code class="notranslate">RUN</code>, <code class="notranslate">CMD</code>, <code class="notranslate">ENTRYPOINT</code>, <code class="notranslate">COPY</code>, <code class="notranslate">ADD</code> æŒ‡ä»¤è®¾ç½®å·¥ä½œç›®å½•ã€‚</p>
<p><strong>è¯­æ³•</strong>ï¼š<code class="notranslate">WORKDIR /path/to/workdir</code></p>
<div class="highlight highlight-source-dockerfile"><pre class="notranslate"><span class="pl-k">WORKDIR</span> /app
<span class="pl-k">COPY</span> . .
<span class="pl-k">RUN</span> ls</pre></div>
<h3>5.1.8 <code class="notranslate">EXPOSE</code></h3>
<p><code class="notranslate">EXPOSE</code> æŒ‡ä»¤å£°æ˜å®¹å™¨åœ¨è¿è¡Œæ—¶ç›‘å¬çš„ç«¯å£ã€‚å®ƒä»…ä»…æ˜¯å£°æ˜ï¼Œå¹¶ä¸ä¼šå®é™…å‘å¸ƒç«¯å£ï¼Œå‘å¸ƒç«¯å£éœ€è¦åœ¨ä½¿ç”¨ <code class="notranslate">docker run -p</code> æ—¶æŒ‡å®šã€‚</p>
<p><strong>è¯­æ³•</strong>ï¼š<code class="notranslate">EXPOSE &lt;port&gt; [&lt;port&gt;/&lt;protocol&gt;...]</code></p>
<div class="highlight highlight-source-dockerfile"><pre class="notranslate"><span class="pl-k">EXPOSE</span> 80
<span class="pl-k">EXPOSE</span> 80/tcp 443/tcp</pre></div>
<h3>5.1.9 <code class="notranslate">ENV</code></h3>
<p><code class="notranslate">ENV</code> æŒ‡ä»¤è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œè¿™äº›å˜é‡åœ¨æ„å»ºæ—¶å’Œå®¹å™¨è¿è¡Œæ—¶éƒ½å¯ç”¨ã€‚</p>
<p><strong>è¯­æ³•</strong>ï¼š</p>
<ul>
<li><code class="notranslate">ENV &lt;key&gt;=&lt;value&gt; ...</code></li>
<li><code class="notranslate">ENV &lt;key&gt; &lt;value&gt;</code></li>
</ul>
<div class="highlight highlight-source-dockerfile"><pre class="notranslate"><span class="pl-k">ENV</span> MY_VAR=<span class="pl-s">"hello world"</span>
<span class="pl-k">ENV</span> PATH=<span class="pl-s">"$PATH:/usr/local/bin"</span></pre></div>
<h3>5.1.10 <code class="notranslate">VOLUME</code></h3>
<p><code class="notranslate">VOLUME</code> æŒ‡ä»¤åˆ›å»ºä¸€ä¸ªæŒ‚è½½ç‚¹ï¼Œå°†å®¿ä¸»æœºä¸Šçš„ç›®å½•æˆ–å¦ä¸€ä¸ªå®¹å™¨ä¸­çš„ç›®å½•æŒ‚è½½åˆ°å®¹å™¨ä¸­ï¼Œç”¨äºæŒä¹…åŒ–æ•°æ®æˆ–å…±äº«æ•°æ®ã€‚</p>
<p><strong>è¯­æ³•</strong>ï¼š<code class="notranslate">VOLUME ["/data"]</code></p>
<div class="highlight highlight-source-dockerfile"><pre class="notranslate"><span class="pl-k">VOLUME</span> /var/lib/mysql</pre></div>
<h3>5.1.11 <code class="notranslate">USER</code></h3>
<p><code class="notranslate">USER</code> æŒ‡ä»¤è®¾ç½®è¿è¡Œ <code class="notranslate">RUN</code>, <code class="notranslate">CMD</code>, <code class="notranslate">ENTRYPOINT</code> æŒ‡ä»¤çš„ç”¨æˆ·æˆ–UIDã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®¹å™¨ä»¥rootç”¨æˆ·è¿è¡Œã€‚</p>
<p><strong>è¯­æ³•</strong>ï¼š<code class="notranslate">USER &lt;user&gt;[:&lt;group&gt;]</code></p>
<div class="highlight highlight-source-dockerfile"><pre class="notranslate"><span class="pl-k">USER</span> appuser</pre></div>
<h3>5.1.12 <code class="notranslate">ARG</code></h3>
<p><code class="notranslate">ARG</code> æŒ‡ä»¤å®šä¹‰äº†ç”¨æˆ·åœ¨ <code class="notranslate">docker build</code> å‘½ä»¤ä¸­ä½¿ç”¨ <code class="notranslate">--build-arg &lt;varname&gt;=&lt;value&gt;</code> æ ‡å¿—ä¼ é€’çš„æ„å»ºæ—¶å˜é‡ã€‚</p>
<p><strong>è¯­æ³•</strong>ï¼š<code class="notranslate">ARG &lt;name&gt;[=&lt;default value&gt;]</code></p>
<div class="highlight highlight-source-dockerfile"><pre class="notranslate"><span class="pl-k">ARG</span> VERSION=1.0
<span class="pl-k">RUN</span> echo <span class="pl-s">"Building version: $VERSION"</span></pre></div>
<h3>5.1.13 <code class="notranslate">LABEL</code></h3>
<p><code class="notranslate">LABEL</code> æŒ‡ä»¤ä¸ºé•œåƒæ·»åŠ å…ƒæ•°æ®ï¼Œä¾‹å¦‚ç»´æŠ¤è€…ä¿¡æ¯ã€ç‰ˆæœ¬å·ç­‰ã€‚</p>
<p><strong>è¯­æ³•</strong>ï¼š<code class="notranslate">LABEL &lt;key&gt;="&lt;value&gt;" [&lt;key&gt;="&lt;value&gt;"]...</code></p>
<div class="highlight highlight-source-dockerfile"><pre class="notranslate"><span class="pl-k">LABEL</span> maintainer=<span class="pl-s">"Your Name &lt;your.email@example.com&gt;"</span>
<span class="pl-k">LABEL</span> version=<span class="pl-s">"1.0"</span></pre></div>
<h2>5.2 æ„å»ºè‡ªå®šä¹‰é•œåƒ</h2>
<p>é€šè¿‡ä¸€ä¸ªå®é™…çš„ä¾‹å­æ¥æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨Dockerfileæ„å»ºä¸€ä¸ªç®€å•çš„Webåº”ç”¨é•œåƒã€‚</p>
<p><strong>å®éªŒç›®æ ‡</strong>ï¼šæ„å»ºä¸€ä¸ªåŸºäºPython Flaskçš„Webåº”ç”¨é•œåƒã€‚</p>
<ol>
<li><strong>åˆ›å»ºé¡¹ç›®ç›®å½•å’Œæ–‡ä»¶</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">mkdir my-flask-app
<span class="pl-c1">cd</span> my-flask-app

cat <span class="pl-s"><span class="pl-k">&lt;&lt;</span><span class="pl-k">EOF</span> &gt; Dockerfile</span>
<span class="pl-s">FROM python:3.9-slim-buster</span>
<span class="pl-s">WORKDIR /app</span>
<span class="pl-s">COPY requirements.txt .</span>
<span class="pl-s">RUN pip install --no-cache-dir -r requirements.txt</span>
<span class="pl-s">COPY . .</span>
<span class="pl-s">EXPOSE 5000</span>
<span class="pl-s">CMD ["python3", "app.py"]</span>
<span class="pl-s"><span class="pl-k">EOF</span></span>

<span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span>Flask<span class="pl-pds">"</span></span> <span class="pl-k">&gt;</span> requirements.txt

cat <span class="pl-s"><span class="pl-k">&lt;&lt;</span><span class="pl-k">EOF</span> &gt; app.py</span>
<span class="pl-s">from flask import Flask</span>
<span class="pl-s">app = Flask(__name__)</span>
<span class="pl-s"></span>
<span class="pl-s">@app.route("/")</span>
<span class="pl-s">def hello():</span>
<span class="pl-s">    return "Hello from Flask in Docker!"</span>
<span class="pl-s"></span>
<span class="pl-s">if __name__ == "__main__":</span>
<span class="pl-s">    app.run(host="0.0.0.0", port=5000)</span>
<span class="pl-s"><span class="pl-k">EOF</span></span></pre></div>
<ol start="2">
<li>
<p><strong>æ„å»ºé•œåƒ</strong>ï¼š</p>
<p>åœ¨<code class="notranslate">my-flask-app</code>ç›®å½•ä¸‹æ‰§è¡Œï¼š</p>
</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker build -t my-flask-web-app:1.0 <span class="pl-c1">.</span></pre></div>
<pre class="notranslate"><code class="notranslate">è¿™é‡Œçš„`.`è¡¨ç¤ºDockerfileæ‰€åœ¨çš„ä¸Šä¸‹æ–‡è·¯å¾„ã€‚
</code></pre>
<ol start="3">
<li><strong>è¿è¡Œå®¹å™¨</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker run -d -p 5000:5000 --name flask-app-container my-flask-web-app:1.0</pre></div>
<ol start="4">
<li>
<p><strong>éªŒè¯</strong>ï¼š</p>
<p>è®¿é—® <code class="notranslate">http://localhost:5000</code> æˆ– <code class="notranslate">http://&lt;your-server-ip&gt;:5000</code>ï¼Œåº”è¯¥èƒ½çœ‹åˆ° "Hello from Flask in Docker!"ã€‚</p>
</li>
</ol>
<h2>5.3 å¤šé˜¶æ®µæ„å»º (Multi-stage builds)</h2>
<p>å¤šé˜¶æ®µæ„å»ºå…è®¸æ‚¨åœ¨Dockerfileä¸­ä½¿ç”¨å¤šä¸ª <code class="notranslate">FROM</code> è¯­å¥ï¼Œæ¯ä¸ª <code class="notranslate">FROM</code> è¯­å¥å¯ä»¥å¼€å§‹ä¸€ä¸ªæ–°çš„æ„å»ºé˜¶æ®µã€‚è¿™ä½¿å¾—æ‚¨å¯ä»¥å°†æ„å»ºæ—¶æ‰€éœ€çš„å·¥å…·å’Œä¾èµ–é¡¹ä¸è¿è¡Œæ—¶æ‰€éœ€çš„æœ€ç»ˆé•œåƒåˆ†ç¦»å¼€æ¥ï¼Œä»è€Œæ˜¾è‘—å‡å°æœ€ç»ˆé•œåƒçš„å¤§å°ã€‚</p>
<p><strong>å®éªŒç›®æ ‡</strong>ï¼šä½¿ç”¨å¤šé˜¶æ®µæ„å»ºä¸€ä¸ªGoè¯­è¨€çš„Webåº”ç”¨ï¼Œæœ€ç»ˆé•œåƒåªåŒ…å«ç¼–è¯‘åçš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚</p>
<ol>
<li><strong>åˆ›å»ºé¡¹ç›®ç›®å½•å’Œæ–‡ä»¶</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">mkdir my-go-app
<span class="pl-c1">cd</span> my-go-app

cat <span class="pl-s"><span class="pl-k">&lt;&lt;</span><span class="pl-k">EOF</span> &gt; Dockerfile</span>
<span class="pl-s">FROM golang:1.20 AS builder</span>
<span class="pl-s">WORKDIR /app</span>
<span class="pl-s">COPY . .</span>
<span class="pl-s">RUN go mod init my-go-app &amp;&amp; go mod tidy</span>
<span class="pl-s">RUN CGO_ENABLED=0 GOOS=linux go build -o my-app .</span>
<span class="pl-s"></span>
<span class="pl-s">FROM alpine:latest</span>
<span class="pl-s">WORKDIR /root/</span>
<span class="pl-s">COPY --from=builder /app/my-app .</span>
<span class="pl-s">CMD ["./my-app"]</span>
<span class="pl-s"><span class="pl-k">EOF</span></span>

cat <span class="pl-s"><span class="pl-k">&lt;&lt;</span><span class="pl-k">EOF</span> &gt; main.go</span>
<span class="pl-s">package main</span>
<span class="pl-s"></span>
<span class="pl-s">import (</span>
<span class="pl-s">	"fmt"</span>
<span class="pl-s">	"log"</span>
<span class="pl-s">	"net/http"</span>
<span class="pl-s">)</span>
<span class="pl-s"></span>
<span class="pl-s">func main() {</span>
<span class="pl-s">	http.HandleFunc("/", func(w http.ResponseWriter, r *http.Request) {</span>
<span class="pl-s">		fmt.Fprintf(w, "Hello from Go in Docker!")</span>
<span class="pl-s">	})</span>
<span class="pl-s">	fmt.Println("Server starting on port 8080...")</span>
<span class="pl-s">	log.Fatal(http.ListenAndServe(":8080", nil))</span>
<span class="pl-s">}</span>
<span class="pl-s"><span class="pl-k">EOF</span></span></pre></div>
<ol start="2">
<li>
<p><strong>æ„å»ºé•œåƒ</strong>ï¼š</p>
<p>åœ¨<code class="notranslate">my-go-app</code>ç›®å½•ä¸‹æ‰§è¡Œï¼š</p>
</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker build -t my-go-web-app:1.0 <span class="pl-c1">.</span></pre></div>
<ol start="3">
<li><strong>è¿è¡Œå®¹å™¨</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker run -d -p 8080:8080 --name go-app-container my-go-web-app:1.0</pre></div>
<ol start="4">
<li>
<p><strong>éªŒè¯</strong>ï¼š</p>
<p>è®¿é—® <code class="notranslate">http://localhost:8080</code> æˆ– <code class="notranslate">http://&lt;your-server-ip&gt;:8080</code>ï¼Œåº”è¯¥èƒ½çœ‹åˆ° "Hello from Go in Docker!"ã€‚</p>
<p>æ‚¨è¿˜å¯ä»¥æ¯”è¾ƒ <code class="notranslate">golang:1.20</code> é•œåƒå’Œ <code class="notranslate">alpine:latest</code> é•œåƒçš„å¤§å°ï¼Œä¼šå‘ç°æœ€ç»ˆçš„ <code class="notranslate">my-go-web-app:1.0</code> é•œåƒéå¸¸å°ã€‚</p>
</li>
</ol>
<h2>5.4 Dockerfileæœ€ä½³å®è·µ</h2>
<p>ç¼–å†™é«˜æ•ˆã€å®‰å…¨ã€å¯ç»´æŠ¤çš„Dockerfileæ˜¯Dockerå¼€å‘çš„å…³é”®ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›æ¨èçš„æœ€ä½³å®è·µï¼š</p>
<ul>
<li><strong>é€‰æ‹©åˆé€‚çš„åŸºç¡€é•œåƒ</strong>ï¼šé€‰æ‹©å°½å¯èƒ½å°ä¸”å®˜æ–¹æ”¯æŒçš„åŸºç¡€é•œåƒï¼Œä¾‹å¦‚ <code class="notranslate">alpine</code>ã€<code class="notranslate">slim</code> ç‰ˆæœ¬ï¼Œä»¥å‡å°æœ€ç»ˆé•œåƒå¤§å°ã€‚</li>
<li><strong>åˆ©ç”¨æ„å»ºç¼“å­˜</strong>ï¼šDockerä¼šç¼“å­˜æ¯ä¸ªæ„å»ºæ­¥éª¤ã€‚å°†ä¸ç»å¸¸å˜åŒ–çš„æŒ‡ä»¤æ”¾åœ¨Dockerfileçš„å‰é¢ï¼Œå°†ç»å¸¸å˜åŒ–çš„æŒ‡ä»¤ï¼ˆå¦‚ <code class="notranslate">COPY . .</code>ï¼‰æ”¾åœ¨åé¢ï¼Œä»¥æœ€å¤§é™åº¦åœ°åˆ©ç”¨ç¼“å­˜ã€‚</li>
<li><strong>å‡å°‘é•œåƒå±‚æ•°</strong>ï¼šå°†å¤šä¸ª <code class="notranslate">RUN</code> å‘½ä»¤åˆå¹¶ä¸ºä¸€ä¸ªï¼Œä½¿ç”¨ <code class="notranslate">&amp;&amp;</code> è¿æ¥ï¼Œå¹¶æ¸…ç†ä¸å†éœ€è¦çš„åŒ…å’Œç¼“å­˜ï¼Œä¾‹å¦‚ <code class="notranslate">apt-get clean</code>ã€‚</li>
<li><strong>ä½¿ç”¨ <code class="notranslate">.dockerignore</code> æ–‡ä»¶</strong>ï¼šç±»ä¼¼äº <code class="notranslate">.gitignore</code>ï¼Œ<code class="notranslate">.dockerignore</code> æ–‡ä»¶å¯ä»¥æ’é™¤æ„å»ºä¸Šä¸‹æ–‡ä¸­çš„ä¸å¿…è¦æ–‡ä»¶ï¼Œå‡å°‘ä¼ è¾“åˆ°Dockerå®ˆæŠ¤è¿›ç¨‹çš„æ•°æ®é‡ï¼ŒåŠ å¿«æ„å»ºé€Ÿåº¦ã€‚</li>
<li><strong>æ˜ç¡®æŒ‡å®šç‰ˆæœ¬</strong>ï¼šåœ¨ <code class="notranslate">FROM</code>ã€<code class="notranslate">RUN apt-get install</code> ç­‰æŒ‡ä»¤ä¸­æ˜ç¡®æŒ‡å®šé•œåƒå’Œè½¯ä»¶åŒ…çš„ç‰ˆæœ¬ï¼Œé¿å…ä¸ç¡®å®šæ€§ã€‚</li>
<li><strong>érootç”¨æˆ·è¿è¡Œ</strong>ï¼šä¸ºäº†å®‰å…¨èµ·è§ï¼Œå°½é‡é¿å…ä»¥rootç”¨æˆ·è¿è¡Œå®¹å™¨ã€‚åœ¨Dockerfileä¸­ä½¿ç”¨ <code class="notranslate">USER</code> æŒ‡ä»¤åˆ‡æ¢åˆ°érootç”¨æˆ·ã€‚</li>
<li><strong>ä½¿ç”¨ <code class="notranslate">ENTRYPOINT</code> å’Œ <code class="notranslate">CMD</code> çš„execæ ¼å¼</strong>ï¼šexecæ ¼å¼æ›´æ¸…æ™°ï¼Œä¸”èƒ½æ›´å¥½åœ°å¤„ç†ä¿¡å·ã€‚</li>
<li><strong>å¤šé˜¶æ®µæ„å»º</strong>ï¼šå¯¹äºéœ€è¦ç¼–è¯‘çš„åº”ç”¨ç¨‹åºï¼ˆå¦‚Goã€Javaã€Node.jsï¼‰ï¼Œä½¿ç”¨å¤šé˜¶æ®µæ„å»ºå¯ä»¥æ˜¾è‘—å‡å°æœ€ç»ˆé•œåƒçš„å¤§å°ã€‚</li>
<li><strong>é¿å…å®‰è£…ä¸å¿…è¦çš„è½¯ä»¶åŒ…</strong>ï¼šåªå®‰è£…åº”ç”¨ç¨‹åºè¿è¡Œæ‰€éœ€çš„æœ€å°ä¾èµ–ã€‚</li>
<li><strong>ä½¿ç”¨å¥åº·æ£€æŸ¥</strong>ï¼šåœ¨Dockerfileä¸­æ·»åŠ  <code class="notranslate">HEALTHCHECK</code> æŒ‡ä»¤ï¼Œè®©DockerçŸ¥é“å®¹å™¨ä½•æ—¶å‡†å¤‡å¥½å¤„ç†è¯·æ±‚ã€‚</li>
</ul>
<p>é€šè¿‡éµå¾ªè¿™äº›æœ€ä½³å®è·µï¼Œæ‚¨å¯ä»¥åˆ›å»ºå‡ºæ›´ä¼˜åŒ–ã€æ›´å®‰å…¨çš„Dockeré•œåƒï¼Œä»è€Œæå‡åº”ç”¨ç¨‹åºçš„éƒ¨ç½²æ•ˆç‡å’Œç¨³å®šæ€§ã€‚</p>
<h1>4. Dockeré•œåƒç®¡ç†</h1>
<p>Dockeré•œåƒæ˜¯ä¸€ä¸ªè½»é‡çº§ã€ç‹¬ç«‹ã€å¯æ‰§è¡Œçš„è½¯ä»¶åŒ…ï¼Œå®ƒåŒ…å«äº†è¿è¡ŒæŸä¸ªè½¯ä»¶æ‰€éœ€çš„æ‰€æœ‰å†…å®¹ï¼ŒåŒ…æ‹¬ä»£ç ã€è¿è¡Œæ—¶ã€åº“ã€ç¯å¢ƒå˜é‡å’Œé…ç½®æ–‡ä»¶ã€‚æœ¬ç« èŠ‚å°†è¯¦ç»†ä»‹ç»å¦‚ä½•è·å–ã€æŸ¥çœ‹ã€åˆ é™¤ã€æ„å»ºã€æ ‡è®°ã€æ¨é€ä»¥åŠå¯¼å…¥/å¯¼å‡ºDockeré•œåƒã€‚</p>
<h2>4.1 é•œåƒè·å– (<code class="notranslate">docker pull</code>)</h2>
<p><code class="notranslate">docker pull</code> å‘½ä»¤ç”¨äºä»è¿œç¨‹é•œåƒä»“åº“ï¼ˆé»˜è®¤ä¸ºDocker Hubï¼‰ä¸‹è½½é•œåƒåˆ°æœ¬åœ°ã€‚</p>
<p><strong>åŸºæœ¬è¯­æ³•</strong>ï¼š</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker pull [OPTIONS] NAME[:TAG<span class="pl-k">|</span>@DIGEST]</pre></div>
<p><strong>å¸¸ç”¨é€‰é¡¹</strong>ï¼š</p>
<ul>
<li><code class="notranslate">--all-tags</code>ï¼šä¸‹è½½ä»“åº“ä¸­çš„æ‰€æœ‰æ ‡ç­¾é•œåƒã€‚</li>
</ul>
<p><strong>å®éªŒç¤ºä¾‹</strong>ï¼š</p>
<ol>
<li><strong>æ‹‰å–æœ€æ–°ç‰ˆUbuntué•œåƒ</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker pull ubuntu:latest</pre></div>
<ol start="2">
<li><strong>æ‹‰å–æŒ‡å®šç‰ˆæœ¬çš„Nginxé•œåƒ</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker pull nginx:1.21</pre></div>
<h2>4.2 é•œåƒæŸ¥çœ‹ (<code class="notranslate">docker images</code>)</h2>
<p><code class="notranslate">docker images</code> æˆ– <code class="notranslate">docker image ls</code> å‘½ä»¤ç”¨äºåˆ—å‡ºæœ¬åœ°ä¸»æœºä¸Šçš„æ‰€æœ‰é•œåƒã€‚</p>
<p><strong>åŸºæœ¬è¯­æ³•</strong>ï¼š</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker images [OPTIONS] [REPOSITORY]</pre></div>
<p><strong>å¸¸ç”¨é€‰é¡¹</strong>ï¼š</p>
<ul>
<li><code class="notranslate">-a</code> æˆ– <code class="notranslate">--all</code>ï¼šæ˜¾ç¤ºæ‰€æœ‰é•œåƒï¼ˆåŒ…æ‹¬ä¸­é—´å±‚é•œåƒï¼‰ã€‚</li>
<li><code class="notranslate">-q</code> æˆ– <code class="notranslate">--quiet</code>ï¼šåªæ˜¾ç¤ºé•œåƒIDã€‚</li>
<li><code class="notranslate">--filter</code>ï¼šæ ¹æ®æ¡ä»¶è¿‡æ»¤æ˜¾ç¤ºç»“æœï¼Œä¾‹å¦‚ <code class="notranslate">dangling=true</code> (æ˜¾ç¤ºæ‚¬ç©ºé•œåƒ)ã€‚</li>
</ul>
<p><strong>å®éªŒç¤ºä¾‹</strong>ï¼š</p>
<ol>
<li><strong>åˆ—å‡ºæ‰€æœ‰æœ¬åœ°é•œåƒ</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker images</pre></div>
<ol start="2">
<li><strong>åªæ˜¾ç¤ºé•œåƒID</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker images -q</pre></div>
<ol start="3">
<li><strong>æŸ¥çœ‹ç‰¹å®šä»“åº“çš„é•œåƒ</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker images ubuntu</pre></div>
<h2>4.3 é•œåƒåˆ é™¤ (<code class="notranslate">docker rmi</code>)</h2>
<p><code class="notranslate">docker rmi</code> å‘½ä»¤ç”¨äºåˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªæœ¬åœ°é•œåƒã€‚</p>
<p><strong>åŸºæœ¬è¯­æ³•</strong>ï¼š</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker rmi [OPTIONS] IMAGE [IMAGE...]</pre></div>
<p><strong>å¸¸ç”¨é€‰é¡¹</strong>ï¼š</p>
<ul>
<li><code class="notranslate">-f</code> æˆ– <code class="notranslate">--force</code>ï¼šå¼ºåˆ¶åˆ é™¤é•œåƒï¼Œå³ä½¿å®ƒè¢«å®¹å™¨ä½¿ç”¨ã€‚</li>
<li><code class="notranslate">--no-prune</code>ï¼šä¸åˆ é™¤æœªè¢«æ ‡è®°çš„çˆ¶é•œåƒã€‚</li>
</ul>
<p><strong>å®éªŒç¤ºä¾‹</strong>ï¼š</p>
<ol>
<li><strong>åˆ é™¤<code class="notranslate">nginx:1.21</code>é•œåƒ</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker rmi nginx:1.21</pre></div>
<ol start="2">
<li><strong>å¼ºåˆ¶åˆ é™¤ä¸€ä¸ªè¢«å®¹å™¨ä½¿ç”¨çš„é•œåƒ</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker rmi -f ubuntu:latest</pre></div>
<ol start="3">
<li><strong>åˆ é™¤æ‰€æœ‰æ‚¬ç©ºé•œåƒï¼ˆæ²¡æœ‰è¢«ä»»ä½•æ ‡ç­¾å¼•ç”¨çš„é•œåƒï¼‰</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker image prune</pre></div>
<h2>4.4 é•œåƒæ„å»º (<code class="notranslate">docker build</code>)</h2>
<p><code class="notranslate">docker build</code> å‘½ä»¤ç”¨äºæ ¹æ®Dockerfileæ–‡ä»¶å’Œä¸Šä¸‹æ–‡æ„å»ºæ–°çš„Dockeré•œåƒã€‚Dockerfileæ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼ŒåŒ…å«äº†ä¸€ç³»åˆ—æ„å»ºé•œåƒçš„æŒ‡ä»¤ã€‚</p>
<p><strong>åŸºæœ¬è¯­æ³•</strong>ï¼š</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker build [OPTIONS] PATH <span class="pl-k">|</span> URL <span class="pl-k">|</span> -</pre></div>
<p><strong>å¸¸ç”¨é€‰é¡¹</strong>ï¼š</p>
<ul>
<li><code class="notranslate">-t</code> æˆ– <code class="notranslate">--tag</code>ï¼šä¸ºæ„å»ºçš„é•œåƒæŒ‡å®šåç§°å’Œæ ‡ç­¾ï¼Œæ ¼å¼ä¸º <code class="notranslate">name:tag</code>ã€‚</li>
<li><code class="notranslate">-f</code> æˆ– <code class="notranslate">--file</code>ï¼šæŒ‡å®šDockerfileæ–‡ä»¶çš„è·¯å¾„ï¼ˆå¦‚æœä¸æ˜¯é»˜è®¤çš„<code class="notranslate">./Dockerfile</code>ï¼‰ã€‚</li>
<li><code class="notranslate">--no-cache</code>ï¼šæ„å»ºé•œåƒæ—¶ä¸ä½¿ç”¨ç¼“å­˜ã€‚</li>
</ul>
<p><strong>å®éªŒç¤ºä¾‹</strong>ï¼š</p>
<ol>
<li>
<p><strong>å‡†å¤‡Dockerfile</strong>ï¼š</p>
<p>é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªåä¸º<code class="notranslate">my-app</code>çš„ç›®å½•ï¼Œå¹¶åœ¨å…¶ä¸­åˆ›å»º<code class="notranslate">Dockerfile</code>æ–‡ä»¶å’Œ<code class="notranslate">app.py</code>æ–‡ä»¶ã€‚</p>
</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">mkdir -p my-app
cat <span class="pl-s"><span class="pl-k">&lt;&lt;</span><span class="pl-k">EOF</span> &gt; my-app/Dockerfile</span>
<span class="pl-s">FROM python:3.9-slim-buster</span>
<span class="pl-s">WORKDIR /app</span>
<span class="pl-s">COPY . .</span>
<span class="pl-s">RUN pip install Flask</span>
<span class="pl-s">EXPOSE 5000</span>
<span class="pl-s">CMD ["python", "app.py"]</span>
<span class="pl-s"><span class="pl-k">EOF</span></span>

<span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span>Flask<span class="pl-pds">"</span></span> <span class="pl-k">&gt;</span> requirements.txt

cat <span class="pl-s"><span class="pl-k">&lt;&lt;</span><span class="pl-k">EOF</span> &gt; my-app/app.py</span>
<span class="pl-s">from flask import Flask</span>
<span class="pl-s">app = Flask(__name__)</span>
<span class="pl-s"></span>
<span class="pl-s">@app.route("/")</span>
<span class="pl-s">def hello():</span>
<span class="pl-s">    return "Hello from Docker!"</span>
<span class="pl-s"></span>
<span class="pl-s">if __name__ == "__main__":</span>
<span class="pl-s">    app.run(host="0.0.0.0", port=5000)</span>
<span class="pl-s"><span class="pl-k">EOF</span></span></pre></div>
<ol start="2">
<li>
<p><strong>æ„å»ºé•œåƒ</strong>ï¼š</p>
<p>åœ¨<code class="notranslate">my-app</code>ç›®å½•ä¸‹æ‰§è¡Œï¼š</p>
</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker build -t my-python-app:1.0 my-app</pre></div>
<pre class="notranslate"><code class="notranslate">è¿™é‡Œçš„`my-app`è¡¨ç¤ºDockerfileæ‰€åœ¨çš„ä¸Šä¸‹æ–‡è·¯å¾„ã€‚
</code></pre>
<ol start="3">
<li><strong>è¿è¡Œæ„å»ºçš„é•œåƒ</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker run -d -p 5000:5000 --name my-web-app my-python-app:1.0</pre></div>
<pre class="notranslate"><code class="notranslate">è®¿é—® `http://localhost:5000` å³å¯çœ‹åˆ° "Hello from Docker!"ã€‚
</code></pre>
<h2>4.5 é•œåƒæ ‡ç­¾ä¸æ¨é€ (<code class="notranslate">docker tag</code>, <code class="notranslate">docker push</code>)</h2>
<p><code class="notranslate">docker tag</code> å‘½ä»¤ç”¨äºä¸ºé•œåƒæ·»åŠ ä¸€ä¸ªé¢å¤–çš„æ ‡ç­¾ï¼Œé€šå¸¸ç”¨äºå°†æœ¬åœ°é•œåƒæ ‡è®°ä¸ºå‡†å¤‡æ¨é€åˆ°è¿œç¨‹ä»“åº“çš„æ ¼å¼ã€‚<code class="notranslate">docker push</code> å‘½ä»¤ç”¨äºå°†æœ¬åœ°é•œåƒæ¨é€åˆ°è¿œç¨‹é•œåƒä»“åº“ã€‚</p>
<h3>4.5.1 æ ‡è®°é•œåƒ (<code class="notranslate">docker tag</code>)</h3>
<p><strong>åŸºæœ¬è¯­æ³•</strong>ï¼š</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker tag SOURCE_IMAGE[:TAG] TARGET_IMAGE[:TAG]</pre></div>
<p><strong>å®éªŒç¤ºä¾‹</strong>ï¼š</p>
<ol>
<li>
<p><strong>ä¸º<code class="notranslate">my-python-app:1.0</code>é•œåƒæ·»åŠ ä¸€ä¸ªæ–°æ ‡ç­¾ï¼Œå‡†å¤‡æ¨é€åˆ°Docker Hub</strong>ï¼š</p>
<p>å‡è®¾æ‚¨çš„Docker Hubç”¨æˆ·åä¸º<code class="notranslate">your_dockerhub_username</code>ã€‚</p>
</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker tag my-python-app:1.0 your_dockerhub_username/my-python-app:latest</pre></div>
<h3>4.5.2 ç™»å½•Docker Hub (<code class="notranslate">docker login</code>)</h3>
<p>åœ¨æ¨é€é•œåƒä¹‹å‰ï¼Œæ‚¨éœ€è¦ç™»å½•åˆ°Docker Hubæˆ–å…¶ä»–è¿œç¨‹ä»“åº“ã€‚</p>
<p><strong>åŸºæœ¬è¯­æ³•</strong>ï¼š</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker login [OPTIONS] [SERVER]</pre></div>
<p><strong>å®éªŒç¤ºä¾‹</strong>ï¼š</p>
<ol>
<li><strong>ç™»å½•Docker Hub</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker login</pre></div>
<pre class="notranslate"><code class="notranslate">ç³»ç»Ÿä¼šæç¤ºæ‚¨è¾“å…¥Docker Hubç”¨æˆ·åå’Œå¯†ç ã€‚
</code></pre>
<h3>4.5.3 æ¨é€é•œåƒ (<code class="notranslate">docker push</code>)</h3>
<p><strong>åŸºæœ¬è¯­æ³•</strong>ï¼š</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker push [OPTIONS] NAME[:TAG]</pre></div>
<p><strong>å®éªŒç¤ºä¾‹</strong>ï¼š</p>
<ol>
<li><strong>æ¨é€<code class="notranslate">my-python-app</code>é•œåƒåˆ°Docker Hub</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker push your_dockerhub_username/my-python-app:latest</pre></div>
<h2>4.6 é•œåƒå¯¼å…¥å¯¼å‡º (<code class="notranslate">docker save</code>, <code class="notranslate">docker load</code>)</h2>
<p><code class="notranslate">docker save</code> å’Œ <code class="notranslate">docker load</code> å‘½ä»¤ç”¨äºå°†é•œåƒæ‰“åŒ…æˆæ–‡ä»¶è¿›è¡Œä¼ è¾“ï¼Œæˆ–ä»æ–‡ä»¶åŠ è½½é•œåƒã€‚</p>
<h3>4.6.1 å¯¼å‡ºé•œåƒ (<code class="notranslate">docker save</code>)</h3>
<p><code class="notranslate">docker save</code> å‘½ä»¤å°†ä¸€ä¸ªæˆ–å¤šä¸ªé•œåƒä¿å­˜åˆ°ä¸€ä¸ªtarå½’æ¡£æ–‡ä»¶ä¸­ã€‚</p>
<p><strong>åŸºæœ¬è¯­æ³•</strong>ï¼š</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker save [OPTIONS] IMAGE [IMAGE...]</pre></div>
<p><strong>å¸¸ç”¨é€‰é¡¹</strong>ï¼š</p>
<ul>
<li><code class="notranslate">-o</code> æˆ– <code class="notranslate">--output</code>ï¼šæŒ‡å®šè¾“å‡ºæ–‡ä»¶è·¯å¾„ã€‚</li>
</ul>
<p><strong>å®éªŒç¤ºä¾‹</strong>ï¼š</p>
<ol>
<li><strong>å°†<code class="notranslate">my-python-app:1.0</code>é•œåƒä¿å­˜åˆ°<code class="notranslate">my-python-app.tar</code>æ–‡ä»¶</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker save -o my-python-app.tar my-python-app:1.0</pre></div>
<h3>4.6.2 å¯¼å…¥é•œåƒ (<code class="notranslate">docker load</code>)</h3>
<p><code class="notranslate">docker load</code> å‘½ä»¤ä»ä¸€ä¸ªtarå½’æ¡£æ–‡ä»¶æˆ–æ ‡å‡†è¾“å…¥ä¸­åŠ è½½é•œåƒã€‚</p>
<p><strong>åŸºæœ¬è¯­æ³•</strong>ï¼š</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker load [OPTIONS]</pre></div>
<p><strong>å¸¸ç”¨é€‰é¡¹</strong>ï¼š</p>
<ul>
<li><code class="notranslate">-i</code> æˆ– <code class="notranslate">--input</code>ï¼šæŒ‡å®šè¾“å…¥æ–‡ä»¶è·¯å¾„ã€‚</li>
</ul>
<p><strong>å®éªŒç¤ºä¾‹</strong>ï¼š</p>
<ol>
<li><strong>ä»<code class="notranslate">my-python-app.tar</code>æ–‡ä»¶åŠ è½½é•œåƒ</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker load -i my-python-app.tar</pre></div>
<p>é€šè¿‡æœ¬ç« èŠ‚çš„å­¦ä¹ å’Œå®è·µï¼Œæ‚¨åº”è¯¥å·²ç»æŒæ¡äº†Dockeré•œåƒçš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼ŒåŒ…æ‹¬ä»è¿œç¨‹ä»“åº“è·å–ã€æœ¬åœ°æŸ¥çœ‹ä¸åˆ é™¤ã€é€šè¿‡Dockerfileæ„å»ºè‡ªå®šä¹‰é•œåƒã€ä»¥åŠé•œåƒçš„æ ‡è®°ã€æ¨é€ã€å¯¼å…¥å’Œå¯¼å‡ºã€‚è¿™äº›æŠ€èƒ½æ˜¯é«˜æ•ˆåˆ©ç”¨Dockerè¿›è¡Œåº”ç”¨éƒ¨ç½²å’Œåˆ†å‘çš„åŸºç¡€ã€‚</p>
<h1>6. Docker Compose</h1>
<p>Docker Composeæ˜¯ä¸€ä¸ªç”¨äºå®šä¹‰å’Œè¿è¡Œå¤šå®¹å™¨Dockeråº”ç”¨ç¨‹åºçš„å·¥å…·ã€‚é€šè¿‡ä¸€ä¸ªYAMLæ–‡ä»¶æ¥é…ç½®åº”ç”¨ç¨‹åºçš„æœåŠ¡ï¼Œç„¶åä½¿ç”¨ä¸€ä¸ªå‘½ä»¤å³å¯ä»é…ç½®ä¸­åˆ›å»ºå¹¶å¯åŠ¨æ‰€æœ‰æœåŠ¡ã€‚è¿™ä½¿å¾—ç®¡ç†å¤æ‚çš„ã€å¤šæœåŠ¡çš„åº”ç”¨ç¨‹åºå˜å¾—éå¸¸ç®€å•ã€‚æœ¬ç« èŠ‚å°†ä»‹ç»Docker Composeçš„å®‰è£…ã€<code class="notranslate">docker-compose.yml</code>æ–‡ä»¶çš„ç¼–å†™ä»¥åŠå¸¸ç”¨å‘½ä»¤ã€‚</p>
<h2>6.1 Docker Composeç®€ä»‹ä¸å®‰è£…</h2>
<h3>6.1.1 Docker Composeç®€ä»‹</h3>
<p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œä¸€ä¸ªå®Œæ•´çš„åº”ç”¨ç¨‹åºå¾€å¾€ç”±å¤šä¸ªæœåŠ¡ç»„æˆï¼Œä¾‹å¦‚WebæœåŠ¡å™¨ã€æ•°æ®åº“ã€ç¼“å­˜ç­‰ã€‚è¿™äº›æœåŠ¡å¯èƒ½éœ€è¦è¿è¡Œåœ¨ä¸åŒçš„å®¹å™¨ä¸­ï¼Œå¹¶ä¸”å®ƒä»¬ä¹‹é—´éœ€è¦ç›¸äº’é€šä¿¡ã€‚æ‰‹åŠ¨ç®¡ç†è¿™äº›å®¹å™¨ï¼ˆåˆ›å»ºã€å¯åŠ¨ã€è¿æ¥ï¼‰ä¼šéå¸¸ç¹çã€‚Docker Composeæ­£æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜è€Œç”Ÿï¼Œå®ƒå…è®¸æ‚¨ï¼š</p>
<ul>
<li><strong>ä½¿ç”¨YAMLæ–‡ä»¶å®šä¹‰åº”ç”¨ç¨‹åºçš„æœåŠ¡</strong>ï¼šåœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­é…ç½®æ‰€æœ‰æœåŠ¡ï¼ŒåŒ…æ‹¬é•œåƒã€ç«¯å£æ˜ å°„ã€æ•°æ®å·ã€ç½‘ç»œç­‰ã€‚</li>
<li><strong>ä¸€é”®å¯åŠ¨æ‰€æœ‰æœåŠ¡</strong>ï¼šé€šè¿‡ä¸€ä¸ªå‘½ä»¤å¯åŠ¨ã€åœæ­¢ã€é‡å»ºå’ŒæŸ¥çœ‹æ‰€æœ‰æœåŠ¡ã€‚</li>
<li><strong>æœåŠ¡é—´é€šä¿¡</strong>ï¼šComposeä¼šè‡ªåŠ¨ä¸ºæœåŠ¡åˆ›å»ºç½‘ç»œï¼Œä½¿å¾—æœåŠ¡å¯ä»¥é€šè¿‡æœåŠ¡åç§°ç›¸äº’å‘ç°å’Œé€šä¿¡ã€‚</li>
</ul>
<h3>6.1.2 Docker Composeå®‰è£…</h3>
<p>åœ¨CentOS 8ä¸Šï¼ŒDocker Composeé€šå¸¸ä½œä¸ºDocker Engineçš„ä¸€éƒ¨åˆ†ï¼Œé€šè¿‡<code class="notranslate">docker-compose-plugin</code>åŒ…è¿›è¡Œå®‰è£…ã€‚å¦‚æœæ‚¨åœ¨å®‰è£…Docker Engineæ—¶å·²ç»åŒ…å«äº†æ­¤æ’ä»¶ï¼Œåˆ™æ— éœ€é¢å¤–å®‰è£…ã€‚æ‚¨å¯ä»¥é€šè¿‡è¿è¡Œ<code class="notranslate">docker compose version</code>å‘½ä»¤æ¥éªŒè¯æ˜¯å¦å·²å®‰è£…ã€‚</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker compose version</pre></div>
<p>å¦‚æœæ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ï¼Œåˆ™è¡¨ç¤ºå·²å®‰è£…ã€‚å¦‚æœæœªå®‰è£…ï¼Œæˆ–è€…æ‚¨éœ€è¦å®‰è£…ç‹¬ç«‹ç‰ˆæœ¬çš„Docker Composeï¼ˆæ—§ç‰ˆæœ¬ï¼‰ï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è¿›è¡Œï¼š</p>
<ol>
<li><strong>ä¸‹è½½Docker ComposeäºŒè¿›åˆ¶æ–‡ä»¶</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">sudo curl -L <span class="pl-s"><span class="pl-pds">"</span>https://github.com/docker/compose/releases/download/v2.23.3/docker-compose-<span class="pl-s"><span class="pl-pds">$(</span>uname -s<span class="pl-pds">)</span></span>-<span class="pl-s"><span class="pl-pds">$(</span>uname -m<span class="pl-pds">)</span></span><span class="pl-pds">"</span></span> -o /usr/local/bin/docker-compose</pre></div>
<pre class="notranslate"><code class="notranslate">**æ³¨æ„**ï¼šè¯·æ ¹æ®å®é™…æƒ…å†µæ›¿æ¢`v2.23.3`ä¸ºæœ€æ–°ç¨³å®šç‰ˆæœ¬ã€‚
</code></pre>
<ol start="2">
<li><strong>æ·»åŠ æ‰§è¡Œæƒé™</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">sudo chmod +x /usr/local/bin/docker-compose</pre></div>
<ol start="3">
<li><strong>éªŒè¯å®‰è£…</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker-compose --version</pre></div>
<pre class="notranslate"><code class="notranslate">**æ³¨æ„**ï¼šæ–°ç‰ˆæœ¬çš„Docker Composeä½œä¸ºDocker CLIçš„æ’ä»¶ï¼Œå‘½ä»¤æ˜¯`docker compose` (æ— è¿å­—ç¬¦)ã€‚æ—§ç‰ˆæœ¬ç‹¬ç«‹å®‰è£…çš„å‘½ä»¤æ˜¯`docker-compose` (æœ‰è¿å­—ç¬¦)ã€‚æœ¬æ‰‹å†Œå°†ä¸»è¦ä½¿ç”¨`docker compose`å‘½ä»¤ã€‚
</code></pre>
<h2>6.2 <code class="notranslate">docker-compose.yml</code> æ–‡ä»¶ç¼–å†™</h2>
<p><code class="notranslate">docker-compose.yml</code> æ˜¯Docker Composeçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼Œå®ƒä½¿ç”¨YAMLæ ¼å¼å®šä¹‰äº†åº”ç”¨ç¨‹åºçš„æœåŠ¡ã€ç½‘ç»œå’Œæ•°æ®å·ã€‚ä»¥ä¸‹æ˜¯å…¶ä¸»è¦ç»“æ„å’Œå¸¸ç”¨é…ç½®é¡¹ã€‚</p>
<h3>6.2.1 æ–‡ä»¶ç»“æ„</h3>
<p>ä¸€ä¸ªå…¸å‹çš„<code class="notranslate">docker-compose.yml</code>æ–‡ä»¶åŒ…å«ä»¥ä¸‹é¡¶çº§é”®ï¼š</p>
<ul>
<li><code class="notranslate">version</code>ï¼šæŒ‡å®šComposeæ–‡ä»¶çš„ç‰ˆæœ¬ï¼Œé€šå¸¸å»ºè®®ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬ï¼ˆå¦‚<code class="notranslate">3.8</code>ï¼‰ã€‚</li>
<li><code class="notranslate">services</code>ï¼šå®šä¹‰åº”ç”¨ç¨‹åºä¸­çš„å„ä¸ªæœåŠ¡ã€‚æ¯ä¸ªæœåŠ¡éƒ½å°†è¿è¡Œåœ¨ä¸€ä¸ªç‹¬ç«‹çš„å®¹å™¨ä¸­ã€‚</li>
<li><code class="notranslate">networks</code>ï¼šå®šä¹‰åº”ç”¨ç¨‹åºä½¿ç”¨çš„ç½‘ç»œã€‚</li>
<li><code class="notranslate">volumes</code>ï¼šå®šä¹‰åº”ç”¨ç¨‹åºä½¿ç”¨çš„æ•°æ®å·ã€‚</li>
</ul>
<h3>6.2.2 <code class="notranslate">services</code> é…ç½®é¡¹</h3>
<p><code class="notranslate">services</code> éƒ¨åˆ†æ˜¯<code class="notranslate">docker-compose.yml</code>æ–‡ä»¶ä¸­æœ€é‡è¦çš„éƒ¨åˆ†ï¼Œå®ƒå®šä¹‰äº†åº”ç”¨ç¨‹åºçš„å„ä¸ªç»„ä»¶ã€‚æ¯ä¸ªæœåŠ¡å¯ä»¥é…ç½®ä»¥ä¸‹å¸¸ç”¨å±æ€§ï¼š</p>
<ul>
<li><code class="notranslate">image</code>ï¼šæŒ‡å®šç”¨äºåˆ›å»ºå®¹å™¨çš„é•œåƒã€‚</li>
<li><code class="notranslate">build</code>ï¼šæŒ‡å®šDockerfileçš„è·¯å¾„ï¼Œç”¨äºæ„å»ºè‡ªå®šä¹‰é•œåƒã€‚</li>
<li><code class="notranslate">ports</code>ï¼šç«¯å£æ˜ å°„ï¼Œæ ¼å¼ä¸<code class="notranslate">docker run -p</code>ç±»ä¼¼ã€‚</li>
<li><code class="notranslate">volumes</code>ï¼šæ•°æ®å·æŒ‚è½½ï¼Œæ ¼å¼ä¸<code class="notranslate">docker run -v</code>ç±»ä¼¼ã€‚</li>
<li><code class="notranslate">environment</code>ï¼šè®¾ç½®ç¯å¢ƒå˜é‡ã€‚</li>
<li><code class="notranslate">depends_on</code>ï¼šå®šä¹‰æœåŠ¡ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œç¡®ä¿ä¾èµ–æœåŠ¡å…ˆå¯åŠ¨ã€‚</li>
<li><code class="notranslate">networks</code>ï¼šæŒ‡å®šæœåŠ¡è¿æ¥çš„ç½‘ç»œã€‚</li>
<li><code class="notranslate">restart</code>ï¼šå®šä¹‰å®¹å™¨çš„é‡å¯ç­–ç•¥ï¼ˆå¦‚<code class="notranslate">always</code>, <code class="notranslate">on-failure</code>, <code class="notranslate">no</code>ï¼‰ã€‚</li>
</ul>
<p><strong>ç¤ºä¾‹ <code class="notranslate">docker-compose.yml</code> æ–‡ä»¶</strong>ï¼š</p>
<p>æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªåŒ…å«ä¸€ä¸ªWebæœåŠ¡ï¼ˆNginxï¼‰å’Œä¸€ä¸ªæ•°æ®åº“æœåŠ¡ï¼ˆMySQLï¼‰çš„ç®€å•åº”ç”¨ã€‚</p>
<div class="highlight highlight-source-yaml"><pre class="notranslate"><span class="pl-ent">version</span>: <span class="pl-s"><span class="pl-pds">'</span>3.8<span class="pl-pds">'</span></span>

<span class="pl-ent">services</span>:
  <span class="pl-ent">web</span>:
    <span class="pl-ent">image</span>: <span class="pl-s">nginx:latest</span>
    <span class="pl-ent">ports</span>:
      - <span class="pl-s"><span class="pl-pds">"</span>80:80<span class="pl-pds">"</span></span>
    <span class="pl-ent">volumes</span>:
      - <span class="pl-s">./nginx/conf.d:/etc/nginx/conf.d</span>
      - <span class="pl-s">./nginx/html:/usr/share/nginx/html</span>
    <span class="pl-ent">depends_on</span>:
      - <span class="pl-s">db</span>
    <span class="pl-ent">networks</span>:
      - <span class="pl-s">app-network</span>

  <span class="pl-ent">db</span>:
    <span class="pl-ent">image</span>: <span class="pl-s">mysql:8.0</span>
    <span class="pl-ent">environment</span>:
      <span class="pl-ent">MYSQL_ROOT_PASSWORD</span>: <span class="pl-s">root_password</span>
      <span class="pl-ent">MYSQL_DATABASE</span>: <span class="pl-s">my_database</span>
    <span class="pl-ent">volumes</span>:
      - <span class="pl-s">db_data:/var/lib/mysql</span>
    <span class="pl-ent">networks</span>:
      - <span class="pl-s">app-network</span>

<span class="pl-ent">networks</span>:
  <span class="pl-ent">app-network</span>:
    <span class="pl-ent">driver</span>: <span class="pl-s">bridge</span>

<span class="pl-ent">volumes</span>:
  <span class="pl-ent">db_data</span>:</pre></div>
<p><strong>æ–‡ä»¶è¯´æ˜</strong>ï¼š</p>
<ul>
<li><strong><code class="notranslate">web</code> æœåŠ¡</strong>ï¼š
<ul>
<li>ä½¿ç”¨ <code class="notranslate">nginx:latest</code> é•œåƒã€‚</li>
<li>å°†å®¿ä¸»æœºçš„80ç«¯å£æ˜ å°„åˆ°å®¹å™¨çš„80ç«¯å£ã€‚</li>
<li>æŒ‚è½½æœ¬åœ° <code class="notranslate">./nginx/conf.d</code> å’Œ <code class="notranslate">./nginx/html</code> ç›®å½•åˆ°å®¹å™¨å†…ï¼Œç”¨äºNginxé…ç½®å’Œç½‘é¡µæ–‡ä»¶ã€‚</li>
<li><code class="notranslate">depends_on: - db</code> è¡¨ç¤º <code class="notranslate">web</code> æœåŠ¡ä¾èµ–äº <code class="notranslate">db</code> æœåŠ¡ï¼Œ<code class="notranslate">db</code> æœåŠ¡ä¼šå…ˆå¯åŠ¨ã€‚</li>
<li>è¿æ¥åˆ° <code class="notranslate">app-network</code> ç½‘ç»œã€‚</li>
</ul>
</li>
<li><strong><code class="notranslate">db</code> æœåŠ¡</strong>ï¼š
<ul>
<li>ä½¿ç”¨ <code class="notranslate">mysql:8.0</code> é•œåƒã€‚</li>
<li>è®¾ç½®MySQLçš„rootå¯†ç å’Œæ•°æ®åº“åç§°ç¯å¢ƒå˜é‡ã€‚</li>
<li>ä½¿ç”¨åä¸º <code class="notranslate">db_data</code> çš„æ•°æ®å·æ¥æŒä¹…åŒ–MySQLæ•°æ®ã€‚</li>
<li>è¿æ¥åˆ° <code class="notranslate">app-network</code> ç½‘ç»œã€‚</li>
</ul>
</li>
<li><strong><code class="notranslate">networks</code> éƒ¨åˆ†</strong>ï¼š
<ul>
<li>å®šä¹‰äº†ä¸€ä¸ªåä¸º <code class="notranslate">app-network</code> çš„è‡ªå®šä¹‰æ¡¥æ¥ç½‘ç»œï¼Œæ‰€æœ‰æœåŠ¡éƒ½å°†è¿æ¥åˆ°æ­¤ç½‘ç»œã€‚</li>
</ul>
</li>
<li><strong><code class="notranslate">volumes</code> éƒ¨åˆ†</strong>ï¼š
<ul>
<li>å®šä¹‰äº†ä¸€ä¸ªåä¸º <code class="notranslate">db_data</code> çš„æ•°æ®å·ï¼Œç”¨äº <code class="notranslate">db</code> æœåŠ¡çš„æŒä¹…åŒ–å­˜å‚¨ã€‚</li>
</ul>
</li>
</ul>
<h2>6.3 å¤šå®¹å™¨åº”ç”¨ç¼–æ’</h2>
<p>ä½¿ç”¨<code class="notranslate">docker-compose.yml</code>æ–‡ä»¶å®šä¹‰å¥½åº”ç”¨ç¨‹åºåï¼Œå°±å¯ä»¥ä½¿ç”¨<code class="notranslate">docker compose</code>å‘½ä»¤æ¥ç®¡ç†æ•´ä¸ªåº”ç”¨æ ˆã€‚</p>
<h3>6.3.1 å¯åŠ¨åº”ç”¨ (<code class="notranslate">docker compose up</code>)</h3>
<p><code class="notranslate">docker compose up</code> å‘½ä»¤ä¼šæ ¹æ®<code class="notranslate">docker-compose.yml</code>æ–‡ä»¶åˆ›å»ºå¹¶å¯åŠ¨æ‰€æœ‰æœåŠ¡ã€‚å¦‚æœæœåŠ¡æ‰€éœ€çš„é•œåƒä¸å­˜åœ¨ï¼Œå®ƒä¼šè‡ªåŠ¨æ‹‰å–ï¼›å¦‚æœæœåŠ¡å®¹å™¨å·²å­˜åœ¨ï¼Œå®ƒä¼šå°è¯•é‡å»ºæˆ–æ›´æ–°ã€‚</p>
<p><strong>åŸºæœ¬è¯­æ³•</strong>ï¼š</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker compose up [OPTIONS] [SERVICE...]</pre></div>
<p><strong>å¸¸ç”¨é€‰é¡¹</strong>ï¼š</p>
<ul>
<li><code class="notranslate">-d</code> æˆ– <code class="notranslate">--detach</code>ï¼šåœ¨åå°è¿è¡Œå®¹å™¨ã€‚</li>
<li><code class="notranslate">--build</code>ï¼šåœ¨å¯åŠ¨å‰é‡æ–°æ„å»ºæœåŠ¡é•œåƒã€‚</li>
<li><code class="notranslate">--force-recreate</code>ï¼šå¼ºåˆ¶é‡æ–°åˆ›å»ºå®¹å™¨ã€‚</li>
</ul>
<p><strong>å®éªŒç¤ºä¾‹</strong>ï¼š</p>
<ol>
<li>
<p><strong>å‡†å¤‡Nginxé…ç½®å’Œç½‘é¡µæ–‡ä»¶</strong>ï¼š</p>
<p>åœ¨<code class="notranslate">docker-compose.yml</code>æ–‡ä»¶åŒçº§ç›®å½•ä¸‹åˆ›å»º<code class="notranslate">nginx</code>ç›®å½•ï¼Œå¹¶åœ¨å…¶ä¸­åˆ›å»º<code class="notranslate">conf.d</code>å’Œ<code class="notranslate">html</code>å­ç›®å½•ã€‚</p>
</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">mkdir -p nginx/conf.d
mkdir -p nginx/html

cat <span class="pl-s"><span class="pl-k">&lt;&lt;</span><span class="pl-k">EOF</span> &gt; nginx/conf.d/default.conf</span>
<span class="pl-s">server {</span>
<span class="pl-s">    listen 80;</span>
<span class="pl-s">    location / {</span>
<span class="pl-s">        root /usr/share/nginx/html;</span>
<span class="pl-s">        index index.html;</span>
<span class="pl-s">    }</span>
<span class="pl-s">}</span>
<span class="pl-s"><span class="pl-k">EOF</span></span>

cat <span class="pl-s"><span class="pl-k">&lt;&lt;</span><span class="pl-k">EOF</span> &gt; nginx/html/index.html</span>
<span class="pl-s">&lt;!DOCTYPE html&gt;</span>
<span class="pl-s">&lt;html&gt;</span>
<span class="pl-s">&lt;head&gt;</span>
<span class="pl-s">    &lt;title&gt;Docker Compose Nginx&lt;/title&gt;</span>
<span class="pl-s">&lt;/head&gt;</span>
<span class="pl-s">&lt;body&gt;</span>
<span class="pl-s">    &lt;h1&gt;Hello from Nginx via Docker Compose!&lt;/h1&gt;</span>
<span class="pl-s">    &lt;p&gt;This is a multi-container application example.&lt;/p&gt;</span>
<span class="pl-s">&lt;/body&gt;</span>
<span class="pl-s">&lt;/html&gt;</span>
<span class="pl-s"><span class="pl-k">EOF</span></span></pre></div>
<ol start="2">
<li>
<p><strong>å¯åŠ¨åº”ç”¨ç¨‹åº</strong>ï¼š</p>
<p>åœ¨åŒ…å«<code class="notranslate">docker-compose.yml</code>æ–‡ä»¶çš„ç›®å½•ä¸‹æ‰§è¡Œï¼š</p>
</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker compose up -d</pre></div>
<pre class="notranslate"><code class="notranslate">è¿™å°†å¯åŠ¨ `web` å’Œ `db` ä¸¤ä¸ªæœåŠ¡ã€‚
</code></pre>
<ol start="3">
<li>
<p><strong>éªŒè¯</strong>ï¼š</p>
<p>è®¿é—® <code class="notranslate">http://localhost:80</code> æˆ– <code class="notranslate">http://&lt;your-server-ip&gt;:80</code>ï¼Œåº”è¯¥èƒ½çœ‹åˆ°Nginxæä¾›çš„ç½‘é¡µã€‚</p>
</li>
</ol>
<h3>6.3.2 åœæ­¢å¹¶ç§»é™¤åº”ç”¨ (<code class="notranslate">docker compose down</code>)</h3>
<p><code class="notranslate">docker compose down</code> å‘½ä»¤ä¼šåœæ­¢å¹¶ç§»é™¤<code class="notranslate">docker-compose.yml</code>æ–‡ä»¶ä¸­å®šä¹‰çš„æ‰€æœ‰æœåŠ¡ã€ç½‘ç»œå’Œæ•°æ®å·ï¼ˆé™¤éæ•°æ®å·è¢«æ˜ç¡®å£°æ˜ä¸ºå¤–éƒ¨çš„ï¼‰ã€‚</p>
<p><strong>åŸºæœ¬è¯­æ³•</strong>ï¼š</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker compose down [OPTIONS]</pre></div>
<p><strong>å¸¸ç”¨é€‰é¡¹</strong>ï¼š</p>
<ul>
<li><code class="notranslate">--volumes</code> æˆ– <code class="notranslate">-v</code>ï¼šåŒæ—¶ç§»é™¤åŒ¿åæ•°æ®å·å’Œåœ¨<code class="notranslate">volumes</code>éƒ¨åˆ†å®šä¹‰çš„æ•°æ®å·ã€‚</li>
<li><code class="notranslate">--rmi all</code>ï¼šç§»é™¤æ‰€æœ‰é•œåƒã€‚</li>
</ul>
<p><strong>å®éªŒç¤ºä¾‹</strong>ï¼š</p>
<ol>
<li><strong>åœæ­¢å¹¶ç§»é™¤åº”ç”¨ç¨‹åº</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker compose down</pre></div>
<ol start="2">
<li><strong>åœæ­¢å¹¶ç§»é™¤åº”ç”¨ç¨‹åºï¼ŒåŒ…æ‹¬æ•°æ®å·</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker compose down -v</pre></div>
<h3>6.3.3 æŸ¥çœ‹æœåŠ¡çŠ¶æ€ (<code class="notranslate">docker compose ps</code>)</h3>
<p><code class="notranslate">docker compose ps</code> å‘½ä»¤ç”¨äºåˆ—å‡ºComposeé¡¹ç›®ä¸­æ‰€æœ‰æœåŠ¡çš„è¿è¡ŒçŠ¶æ€ã€‚</p>
<p><strong>åŸºæœ¬è¯­æ³•</strong>ï¼š</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker compose ps [OPTIONS] [SERVICE...]</pre></div>
<p><strong>å®éªŒç¤ºä¾‹</strong>ï¼š</p>
<ol>
<li><strong>æŸ¥çœ‹æ‰€æœ‰æœåŠ¡çš„çŠ¶æ€</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker compose ps</pre></div>
<h3>6.3.4 æŸ¥çœ‹æœåŠ¡æ—¥å¿— (<code class="notranslate">docker compose logs</code>)</h3>
<p><code class="notranslate">docker compose logs</code> å‘½ä»¤ç”¨äºæŸ¥çœ‹Composeé¡¹ç›®ä¸­æ‰€æœ‰æœåŠ¡æˆ–æŒ‡å®šæœåŠ¡çš„æ—¥å¿—è¾“å‡ºã€‚</p>
<p><strong>åŸºæœ¬è¯­æ³•</strong>ï¼š</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker compose logs [OPTIONS] [SERVICE...]</pre></div>
<p><strong>å¸¸ç”¨é€‰é¡¹</strong>ï¼š</p>
<ul>
<li><code class="notranslate">-f</code> æˆ– <code class="notranslate">--follow</code>ï¼šæŒç»­è¾“å‡ºæ—¥å¿—ã€‚</li>
<li><code class="notranslate">--tail</code>ï¼šæ˜¾ç¤ºæ—¥å¿—çš„æœ€åNè¡Œã€‚</li>
</ul>
<p><strong>å®éªŒç¤ºä¾‹</strong>ï¼š</p>
<ol>
<li><strong>æŸ¥çœ‹æ‰€æœ‰æœåŠ¡çš„å®æ—¶æ—¥å¿—</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker compose logs -f</pre></div>
<ol start="2">
<li><strong>æŸ¥çœ‹<code class="notranslate">web</code>æœåŠ¡çš„æ—¥å¿—</strong>ï¼š</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker compose logs web</pre></div>
<h2>6.4 Composeå¸¸ç”¨å‘½ä»¤</h2>
<p>é™¤äº†ä¸Šè¿°å‘½ä»¤ï¼ŒDocker Composeè¿˜æä¾›äº†ä¸€äº›å…¶ä»–æœ‰ç”¨çš„å‘½ä»¤ï¼š</p>
<ul>
<li><strong><code class="notranslate">docker compose build</code></strong>ï¼šæ„å»ºï¼ˆæˆ–é‡æ–°æ„å»ºï¼‰æœåŠ¡é•œåƒã€‚</li>
</ul>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker compose build [SERVICE...]</pre></div>
<ul>
<li><strong><code class="notranslate">docker compose start</code></strong>ï¼šå¯åŠ¨å·²åœæ­¢çš„æœåŠ¡å®¹å™¨ã€‚</li>
</ul>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker compose start [SERVICE...]</pre></div>
<ul>
<li><strong><code class="notranslate">docker compose stop</code></strong>ï¼šåœæ­¢è¿è¡Œä¸­çš„æœåŠ¡å®¹å™¨ï¼Œä½†ä¸åˆ é™¤å®ƒä»¬ã€‚</li>
</ul>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker compose stop [SERVICE...]</pre></div>
<ul>
<li><strong><code class="notranslate">docker compose restart</code></strong>ï¼šé‡å¯æœåŠ¡å®¹å™¨ã€‚</li>
</ul>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker compose restart [SERVICE...]</pre></div>
<ul>
<li><strong><code class="notranslate">docker compose exec</code></strong>ï¼šåœ¨è¿è¡Œä¸­çš„æœåŠ¡å®¹å™¨ä¸­æ‰§è¡Œå‘½ä»¤ã€‚</li>
</ul>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker compose <span class="pl-c1">exec</span> web bash</pre></div>
<ul>
<li><strong><code class="notranslate">docker compose config</code></strong>ï¼šéªŒè¯å¹¶æŸ¥çœ‹Composeæ–‡ä»¶çš„é…ç½®ã€‚</li>
</ul>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker compose config</pre></div>
<ul>
<li><strong><code class="notranslate">docker compose pull</code></strong>ï¼šæ‹‰å–æœåŠ¡æ‰€éœ€çš„é•œåƒã€‚</li>
</ul>
<div class="highlight highlight-source-shell"><pre class="notranslate">docker compose pull [SERVICE...]</pre></div>
<p>é€šè¿‡æœ¬ç« èŠ‚çš„å­¦ä¹ å’Œå®è·µï¼Œæ‚¨åº”è¯¥å·²ç»æŒæ¡äº†Docker Composeçš„åŸºæœ¬æ¦‚å¿µã€<code class="notranslate">docker-compose.yml</code>æ–‡ä»¶çš„ç¼–å†™ä»¥åŠå¦‚ä½•ä½¿ç”¨<code class="notranslate">docker compose</code>å‘½ä»¤æ¥ç®¡ç†å¤šå®¹å™¨åº”ç”¨ç¨‹åºã€‚Docker Composeæå¤§åœ°ç®€åŒ–äº†å¤æ‚åº”ç”¨çš„éƒ¨ç½²å’Œç®¡ç†ï¼Œæ˜¯Dockerç”Ÿæ€ç³»ç»Ÿä¸­ä¸å¯æˆ–ç¼ºçš„å·¥å…·ã€‚</p>
<h1>7. æ€»ç»“ä¸å±•æœ›</h1>
<h2>7.1 å®éªŒå›é¡¾</h2>
<p>é€šè¿‡æœ¬å®éªŒæ‰‹å†Œçš„å­¦ä¹ å’Œå®è·µï¼Œæ‚¨å·²ç»å…¨é¢æŒæ¡äº†Dockeråœ¨CentOS 8ç¯å¢ƒä¸‹çš„æ ¸å¿ƒæŠ€æœ¯ã€‚æˆ‘ä»¬ä»Dockerçš„å®‰è£…ä¸å›½å†…é•œåƒåŠ é€Ÿé…ç½®å¼€å§‹ï¼Œé€æ­¥æ·±å…¥åˆ°å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€äº¤äº’æ“ä½œã€ç½‘ç»œé…ç½®å’Œæ•°æ®æŒä¹…åŒ–ã€‚éšåï¼Œæˆ‘ä»¬æ¢è®¨äº†é•œåƒçš„è·å–ã€æŸ¥çœ‹ã€åˆ é™¤ã€æ„å»ºã€æ ‡è®°ã€æ¨é€ä»¥åŠå¯¼å…¥å¯¼å‡ºç­‰ç®¡ç†æ“ä½œã€‚æ¥ç€ï¼Œæˆ‘ä»¬å­¦ä¹ äº†å¦‚ä½•ç¼–å†™Dockerfileæ¥è‡ªåŠ¨åŒ–é•œåƒæ„å»ºï¼Œå¹¶äº†è§£äº†å¤šé˜¶æ®µæ„å»ºçš„ä¼˜åŠ¿å’ŒDockerfileçš„æœ€ä½³å®è·µã€‚æœ€åï¼Œæˆ‘ä»¬æŒæ¡äº†Docker Composeï¼Œé€šè¿‡YAMLæ–‡ä»¶ç¼–æ’å’Œç®¡ç†å¤šå®¹å™¨åº”ç”¨ç¨‹åºï¼Œæå¤§åœ°æå‡äº†åº”ç”¨éƒ¨ç½²å’Œç®¡ç†çš„æ•ˆç‡ã€‚</p>
<p>è¿™äº›å®éªŒä¸ä»…è¦†ç›–äº†Dockerçš„å¸¸ç”¨å‘½ä»¤ï¼Œè¿˜é€šè¿‡å®é™…æ¡ˆä¾‹å¸®åŠ©æ‚¨ç†è§£äº†Dockeråœ¨å®é™…åº”ç”¨ä¸­çš„å·¥ä½œåŸç†å’Œæœ€ä½³å®è·µã€‚æ‚¨ç°åœ¨åº”è¯¥èƒ½å¤Ÿç‹¬ç«‹åœ°åœ¨CentOS 8ç³»ç»Ÿä¸Šéƒ¨ç½²ã€ç®¡ç†å’Œç»´æŠ¤åŸºäºDockerçš„åº”ç”¨ç¨‹åºã€‚</p>
<h2>7.2 Dockerç”Ÿæ€ç³»ç»Ÿç®€è¿°</h2>
<p>Dockerä¸ä»…ä»…æ˜¯ä¸€ä¸ªå®¹å™¨è¿è¡Œæ—¶ï¼Œå®ƒæ›´æ˜¯ä¸€ä¸ªåºå¤§çš„ç”Ÿæ€ç³»ç»Ÿï¼Œå›´ç»•ç€å®¹å™¨æŠ€æœ¯æä¾›äº†ä¸°å¯Œçš„å·¥å…·å’ŒæœåŠ¡ï¼š</p>
<ul>
<li><strong>Docker Hub</strong>ï¼šå®˜æ–¹çš„å…¬å…±é•œåƒä»“åº“ï¼Œæä¾›äº†æµ·é‡çš„å®˜æ–¹å’Œç¤¾åŒºé•œåƒã€‚</li>
<li><strong>Docker Desktop</strong>ï¼šé€‚ç”¨äºWindowså’ŒmacOSçš„æ¡Œé¢åº”ç”¨ç¨‹åºï¼Œæä¾›äº†Docker Engineã€Kubernetesã€Composeç­‰å·¥å…·çš„é›†æˆç¯å¢ƒã€‚</li>
<li><strong>Docker Swarm</strong>ï¼šDockerå®˜æ–¹æä¾›çš„å®¹å™¨ç¼–æ’å·¥å…·ï¼Œç”¨äºç®¡ç†å’Œéƒ¨ç½²é›†ç¾¤ä¸­çš„å®¹å™¨ã€‚</li>
<li><strong>Kubernetes (K8s)</strong>ï¼šç›®å‰æœ€æµè¡Œçš„å®¹å™¨ç¼–æ’ç³»ç»Ÿï¼Œç”±Googleå¼€æºï¼Œæä¾›äº†æ›´å¼ºå¤§çš„è‡ªåŠ¨åŒ–éƒ¨ç½²ã€æ‰©å±•å’Œç®¡ç†å®¹å™¨åŒ–åº”ç”¨çš„èƒ½åŠ›ã€‚</li>
<li><strong>Containerd</strong>ï¼šä¸€ä¸ªè¡Œä¸šæ ‡å‡†çš„å®¹å™¨è¿è¡Œæ—¶ï¼ŒDocker Engineåº•å±‚å°±æ˜¯ä½¿ç”¨Containerdæ¥ç®¡ç†å®¹å™¨ç”Ÿå‘½å‘¨æœŸã€‚</li>
<li><strong>BuildKit</strong>ï¼šä¸€ä¸ªæ”¹è¿›çš„é•œåƒæ„å»ºå¼•æ“ï¼Œæä¾›äº†æ›´å¿«çš„æ„å»ºé€Ÿåº¦å’Œæ›´ä¸°å¯Œçš„åŠŸèƒ½ã€‚</li>
</ul>
<h2>7.3 æœªæ¥å­¦ä¹ æ–¹å‘</h2>
<p>æŒæ¡äº†Dockerçš„åŸºç¡€çŸ¥è¯†å’Œå®è·µæŠ€èƒ½åï¼Œæ‚¨å¯ä»¥è¿›ä¸€æ­¥æ¢ç´¢ä»¥ä¸‹æ–¹å‘ï¼Œä»¥æ·±åŒ–æ‚¨çš„å®¹å™¨åŒ–æŠ€æœ¯æ ˆï¼š</p>
<ul>
<li><strong>Kubernetes</strong>ï¼šå­¦ä¹ Kubernetesæ˜¯å®¹å™¨åŒ–æŠ€æœ¯è¿›é˜¶çš„å¿…ç»ä¹‹è·¯ï¼Œå®ƒèƒ½å¸®åŠ©æ‚¨ç®¡ç†å¤§è§„æ¨¡çš„å®¹å™¨é›†ç¾¤å’Œå¤æ‚çš„å¾®æœåŠ¡æ¶æ„ã€‚</li>
<li><strong>CI/CDä¸DevOps</strong>ï¼šå°†Dockeré›†æˆåˆ°æŒç»­é›†æˆ/æŒç»­éƒ¨ç½²ï¼ˆCI/CDï¼‰æµç¨‹ä¸­ï¼Œå®ç°è‡ªåŠ¨åŒ–æµ‹è¯•ã€æ„å»ºå’Œéƒ¨ç½²ã€‚</li>
<li><strong>å®¹å™¨å®‰å…¨</strong>ï¼šæ·±å…¥äº†è§£å®¹å™¨å®‰å…¨æœ€ä½³å®è·µï¼ŒåŒ…æ‹¬é•œåƒæ‰«æã€è¿è¡Œæ—¶å®‰å…¨ã€ç½‘ç»œéš”ç¦»ç­‰ã€‚</li>
<li><strong>æœåŠ¡ç½‘æ ¼ (Service Mesh)</strong>ï¼šå¦‚Istioã€Linkerdç­‰ï¼Œç”¨äºç®¡ç†å¾®æœåŠ¡ä¹‹é—´çš„é€šä¿¡ï¼Œæä¾›æµé‡æ§åˆ¶ã€å¯è§‚æµ‹æ€§å’Œå®‰å…¨æ€§ã€‚</li>
<li><strong>æ— æœåŠ¡å™¨è®¡ç®— (Serverless)</strong>ï¼šç»“åˆå®¹å™¨æŠ€æœ¯ï¼Œæ¢ç´¢AWS Lambdaã€Google Cloud Functionsç­‰æ— æœåŠ¡å™¨å¹³å°ã€‚</li>
<li><strong>äº‘åŸç”Ÿåº”ç”¨å¼€å‘</strong>ï¼šå­¦ä¹ å¦‚ä½•è®¾è®¡å’Œå¼€å‘ç¬¦åˆäº‘åŸç”ŸåŸåˆ™çš„åº”ç”¨ç¨‹åºï¼Œå……åˆ†åˆ©ç”¨å®¹å™¨å’Œå¾®æœåŠ¡æ¶æ„çš„ä¼˜åŠ¿ã€‚</li>
</ul></div>
<div style="font-size:small;margin-top:8px;float:right;"></div>

<button class="btn btn-block" type="button" onclick="openComments()" id="cmButton">è¯„è®º</button>
<div class="comments" id="comments"></div>

</div>
    <div id="footer"><div id="footer1">Copyright Â© <span id="copyrightYear"></span> <a href="https://bbs.017121.xyz">Gweek</a></div>
<div id="footer2">
    <span id="runday"></span><span>Powered by <a href="https://meekdai.com/Gmeek.html" target="_blank">Gmeek</a></span>
</div>

<script>
var now=new Date();
document.getElementById("copyrightYear").innerHTML=now.getFullYear();

if(""!=""){
    var startSite=new Date("");
    var diff=now.getTime()-startSite.getTime();
    var diffDay=Math.floor(diff/(1000*60*60*24));
    document.getElementById("runday").innerHTML="ç½‘ç«™è¿è¡Œ"+diffDay+"å¤©"+" â€¢ ";
}
</script></div>
</body>
<script>
var IconList={'sun': 'M8 10.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5zM8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0V.75A.75.75 0 018 0zm0 13a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 018 13zM2.343 2.343a.75.75 0 011.061 0l1.06 1.061a.75.75 0 01-1.06 1.06l-1.06-1.06a.75.75 0 010-1.06zm9.193 9.193a.75.75 0 011.06 0l1.061 1.06a.75.75 0 01-1.06 1.061l-1.061-1.06a.75.75 0 010-1.061zM16 8a.75.75 0 01-.75.75h-1.5a.75.75 0 010-1.5h1.5A.75.75 0 0116 8zM3 8a.75.75 0 01-.75.75H.75a.75.75 0 010-1.5h1.5A.75.75 0 013 8zm10.657-5.657a.75.75 0 010 1.061l-1.061 1.06a.75.75 0 11-1.06-1.06l1.06-1.06a.75.75 0 011.06 0zm-9.193 9.193a.75.75 0 010 1.06l-1.06 1.061a.75.75 0 11-1.061-1.06l1.06-1.061a.75.75 0 011.061 0z', 'moon': 'M9.598 1.591a.75.75 0 01.785-.175 7 7 0 11-8.967 8.967.75.75 0 01.961-.96 5.5 5.5 0 007.046-7.046.75.75 0 01.175-.786zm1.616 1.945a7 7 0 01-7.678 7.678 5.5 5.5 0 107.678-7.678z', 'sync': 'M1.705 8.005a.75.75 0 0 1 .834.656 5.5 5.5 0 0 0 9.592 2.97l-1.204-1.204a.25.25 0 0 1 .177-.427h3.646a.25.25 0 0 1 .25.25v3.646a.25.25 0 0 1-.427.177l-1.38-1.38A7.002 7.002 0 0 1 1.05 8.84a.75.75 0 0 1 .656-.834ZM8 2.5a5.487 5.487 0 0 0-4.131 1.869l1.204 1.204A.25.25 0 0 1 4.896 6H1.25A.25.25 0 0 1 1 5.75V2.104a.25.25 0 0 1 .427-.177l1.38 1.38A7.002 7.002 0 0 1 14.95 7.16a.75.75 0 0 1-1.49.178A5.5 5.5 0 0 0 8 2.5Z', 'home': 'M6.906.664a1.749 1.749 0 0 1 2.187 0l5.25 4.2c.415.332.657.835.657 1.367v7.019A1.75 1.75 0 0 1 13.25 15h-3.5a.75.75 0 0 1-.75-.75V9H7v5.25a.75.75 0 0 1-.75.75h-3.5A1.75 1.75 0 0 1 1 13.25V6.23c0-.531.242-1.034.657-1.366l5.25-4.2Zm1.25 1.171a.25.25 0 0 0-.312 0l-5.25 4.2a.25.25 0 0 0-.094.196v7.019c0 .138.112.25.25.25H5.5V8.25a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 .75.75v5.25h2.75a.25.25 0 0 0 .25-.25V6.23a.25.25 0 0 0-.094-.195Z', 'github': 'M8 0c4.42 0 8 3.58 8 8a8.013 8.013 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.27.01-1.13.01-2.2 0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95 0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12 0 0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27-.68 0-1.36.09-2 .27-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15 0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.21-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94 0 .67.01 1.3.01 1.49 0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8Z', 'copy': 'M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z', 'check': 'M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'};
var utterancesLoad=0;

let themeSettings={
    "dark": ["dark","moon","#00f0ff","dark-blue"],
    "light": ["light","sun","#ff5000","github-light"],
    "auto": ["auto","sync","","preferred-color-scheme"]
};
function changeTheme(mode, icon, color, utheme){
    document.documentElement.setAttribute("data-color-mode",mode);
    document.getElementById("themeSwitch").setAttribute("d",value=IconList[icon]);
    document.getElementById("themeSwitch").parentNode.style.color=color;
    if(utterancesLoad==1){utterancesTheme(utheme);}
}
function modeSwitch(){
    let currentMode=document.documentElement.getAttribute('data-color-mode');
    let newMode = currentMode === "light" ? "dark" : currentMode === "dark" ? "auto" : "light";
    localStorage.setItem("meek_theme", newMode);
    if(themeSettings[newMode]){
        changeTheme(...themeSettings[newMode]);
    }
}
function utterancesTheme(theme){
    const message={type:'set-theme',theme: theme};
    const iframe=document.getElementsByClassName('utterances-frame')[0];
    iframe.contentWindow.postMessage(message,'https://utteranc.es');
}
if(themeSettings[theme]){changeTheme(...themeSettings[theme]);}
console.log("\n %c Gmeek last https://github.com/Meekdai/Gmeek \n","padding:5px 0;background:#02d81d;color:#fff");
</script>

<script>
document.getElementById("pathHome").setAttribute("d",IconList["home"]);
document.getElementById("pathIssue").setAttribute("d",IconList["github"]);



function openComments(){
    cm=document.getElementById("comments");
    cmButton=document.getElementById("cmButton");
    cmButton.innerHTML="loading";
    span=document.createElement("span");
    span.setAttribute("class","AnimatedEllipsis");
    cmButton.appendChild(span);

    script=document.createElement("script");
    script.setAttribute("src","https://utteranc.es/client.js");
    script.setAttribute("repo","igweek/igweek.github.io");
    script.setAttribute("issue-term","title");
    
    if(localStorage.getItem("meek_theme")=="dark"){script.setAttribute("theme","dark-blue");}
    else if(localStorage.getItem("meek_theme")=="light") {script.setAttribute("theme","github-light");}
    else{script.setAttribute("theme","preferred-color-scheme");}
    
    script.setAttribute("crossorigin","anonymous");
    script.setAttribute("async","");
    cm.appendChild(script);

    int=self.setInterval("iFrameLoading()",200);
}

function iFrameLoading(){
    var utterances=document.getElementsByClassName('utterances');
    if(utterances.length==1){
        if(utterances[0].style.height!=""){
            utterancesLoad=1;
            int=window.clearInterval(int);
            document.getElementById("cmButton").style.display="none";
            console.log("utterances Load OK");
        }
    }
}

document.addEventListener('DOMContentLoaded', () => {
    const createClipboardHTML = (codeContent, additionalClasses = '') => `
        <pre class="notranslate"><code class="notranslate">${codeContent}</code></pre>
        <div class="clipboard-container position-absolute right-0 top-0 ${additionalClasses}">
            <clipboard-copy class="ClipboardButton btn m-2 p-0" role="button" style="display: inherit;">
                <svg height="16" width="16" class="octicon octicon-copy m-2"><path d="${IconList["copy"]}"></path></svg>
                <svg height="16" width="16" class="octicon octicon-check color-fg-success m-2 d-none"><path d="${IconList["check"]}"></path></svg>
            </clipboard-copy>
            <div class="copy-feedback">Copied!</div>
        </div>
    `;

    const handleCodeElements = (selector = '') => {
        document.querySelectorAll(selector).forEach(codeElement => {
            const codeContent = codeElement.innerHTML;
            const newStructure = document.createElement('div');
            newStructure.className = 'snippet-clipboard-content position-relative overflow-auto';
            newStructure.innerHTML = createClipboardHTML(codeContent);

            const parentElement = codeElement.parentElement;
            if (selector.includes('highlight')) {
                parentElement.insertBefore(newStructure, codeElement.nextSibling);
                parentElement.removeChild(codeElement);
            } else {
                parentElement.parentElement.replaceChild(newStructure, parentElement);
            }
        });
    };

    handleCodeElements('pre.notranslate > code.notranslate');
    handleCodeElements('div.highlight > pre.notranslate');

    let currentFeedback = null;
    document.querySelectorAll('clipboard-copy').forEach(copyButton => {
        copyButton.addEventListener('click', () => {
            const codeContent = copyButton.closest('.snippet-clipboard-content').innerText;
            const tempTextArea = document.createElement('textarea');
            tempTextArea.value = codeContent;
            document.body.appendChild(tempTextArea);
            tempTextArea.select();
            document.execCommand('copy');
            document.body.removeChild(tempTextArea);

            const copyIcon = copyButton.querySelector('.octicon-copy');
            const checkIcon = copyButton.querySelector('.octicon-check');
            const copyFeedback = copyButton.nextElementSibling;

            if (currentFeedback && currentFeedback !== copyFeedback) {currentFeedback.style.display = 'none';}
            currentFeedback = copyFeedback;

            copyIcon.classList.add('d-none');
            checkIcon.classList.remove('d-none');
            copyFeedback.style.display = 'block';
            copyButton.style.borderColor = 'var(--color-success-fg)';

            setTimeout(() => {
                copyIcon.classList.remove('d-none');
                checkIcon.classList.add('d-none');
                copyFeedback.style.display = 'none';
                copyButton.style.borderColor = '';
            }, 2000);
        });
    });
});

</script>
<script src='/plugins/articletoc.js'></script><script src='/plugins/lightbox.js'></script>

</html>
